{"ast":null,"code":"import _classCallCheck from\"/Users/matthewchang/workspace/github/SEM2020/store-owner-console/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/matthewchang/workspace/github/SEM2020/store-owner-console/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/matthewchang/workspace/github/SEM2020/store-owner-console/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/matthewchang/workspace/github/SEM2020/store-owner-console/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from\"react\";import mime from\"mime-types\";import{Modal,Input,Button,Icon}from\"semantic-ui-react\";var FileModal=/*#__PURE__*/function(_React$Component){_inherits(FileModal,_React$Component);var _super=_createSuper(FileModal);function FileModal(){var _this;_classCallCheck(this,FileModal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={file:null,authorized:[\"image/jpeg\",\"image/png\"]};_this.addFile=function(event){var file=event.target.files[0];if(file){_this.setState({file:file});}};_this.sendFile=function(){var file=_this.state.file;var _this$props=_this.props,uploadFile=_this$props.uploadFile,closeModal=_this$props.closeModal;if(file!==null){if(_this.isAuthorized(file.name)){var metadata={contentType:mime.lookup(file.name)};uploadFile(file,metadata);closeModal();_this.clearFile();}}};_this.isAuthorized=function(filename){return _this.state.authorized.includes(mime.lookup(filename));};_this.clearFile=function(){return _this.setState({file:null});};return _this;}_createClass(FileModal,[{key:\"render\",value:function render(){var _this$props2=this.props,modal=_this$props2.modal,closeModal=_this$props2.closeModal;return/*#__PURE__*/_jsxs(Modal,{basic:true,open:modal,onClose:closeModal,children:[/*#__PURE__*/_jsx(Modal.Header,{children:\"Select an Image File\"}),/*#__PURE__*/_jsx(Modal.Content,{children:/*#__PURE__*/_jsx(Input,{onChange:this.addFile,fluid:true,label:\"File types: jpg, png\",name:\"file\",type:\"file\"})}),/*#__PURE__*/_jsxs(Modal.Actions,{children:[/*#__PURE__*/_jsxs(Button,{onClick:this.sendFile,color:\"green\",inverted:true,children:[/*#__PURE__*/_jsx(Icon,{name:\"checkmark\"}),\" Send\"]}),/*#__PURE__*/_jsxs(Button,{color:\"red\",inverted:true,onClick:closeModal,children:[/*#__PURE__*/_jsx(Icon,{name:\"remove\"}),\" Cancel\"]})]})]});}}]);return FileModal;}(React.Component);export default FileModal;","map":{"version":3,"sources":["/Users/matthewchang/workspace/github/SEM2020/store-owner-console/src/components/Messages/FileModal.js"],"names":["React","mime","Modal","Input","Button","Icon","FileModal","state","file","authorized","addFile","event","target","files","setState","sendFile","props","uploadFile","closeModal","isAuthorized","name","metadata","contentType","lookup","clearFile","filename","includes","modal","Component"],"mappings":"oyBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,CACA,OAASC,KAAT,CAAgBC,KAAhB,CAAuBC,MAAvB,CAA+BC,IAA/B,KAA2C,mBAA3C,C,GAEMC,CAAAA,S,mVACJC,K,CAAQ,CACNC,IAAI,CAAE,IADA,CAENC,UAAU,CAAE,CAAC,YAAD,CAAe,WAAf,CAFN,C,OAKRC,O,CAAU,SAAAC,KAAK,CAAI,CACjB,GAAMH,CAAAA,IAAI,CAAGG,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAb,CACA,GAAIL,IAAJ,CAAU,CACR,MAAKM,QAAL,CAAc,CAAEN,IAAI,CAAJA,IAAF,CAAd,EACD,CACF,C,OAEDO,Q,CAAW,UAAM,IACPP,CAAAA,IADO,CACE,MAAKD,KADP,CACPC,IADO,iBAEoB,MAAKQ,KAFzB,CAEPC,UAFO,aAEPA,UAFO,CAEKC,UAFL,aAEKA,UAFL,CAIf,GAAIV,IAAI,GAAK,IAAb,CAAmB,CACjB,GAAI,MAAKW,YAAL,CAAkBX,IAAI,CAACY,IAAvB,CAAJ,CAAkC,CAChC,GAAMC,CAAAA,QAAQ,CAAG,CAAEC,WAAW,CAAErB,IAAI,CAACsB,MAAL,CAAYf,IAAI,CAACY,IAAjB,CAAf,CAAjB,CACAH,UAAU,CAACT,IAAD,CAAOa,QAAP,CAAV,CACAH,UAAU,GACV,MAAKM,SAAL,GACD,CACF,CACF,C,OAEDL,Y,CAAe,SAAAM,QAAQ,QACrB,OAAKlB,KAAL,CAAWE,UAAX,CAAsBiB,QAAtB,CAA+BzB,IAAI,CAACsB,MAAL,CAAYE,QAAZ,CAA/B,CADqB,E,OAGvBD,S,CAAY,iBAAM,OAAKV,QAAL,CAAc,CAAEN,IAAI,CAAE,IAAR,CAAd,CAAN,E,4EAEH,kBACuB,KAAKQ,KAD5B,CACCW,KADD,cACCA,KADD,CACQT,UADR,cACQA,UADR,CAGP,mBACE,MAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAES,KAAnB,CAA0B,OAAO,CAAET,UAAnC,wBACE,KAAC,KAAD,CAAO,MAAP,mCADF,cAEE,KAAC,KAAD,CAAO,OAAP,wBACE,KAAC,KAAD,EACE,QAAQ,CAAE,KAAKR,OADjB,CAEE,KAAK,KAFP,CAGE,KAAK,CAAC,sBAHR,CAIE,IAAI,CAAC,MAJP,CAKE,IAAI,CAAC,MALP,EADF,EAFF,cAWE,MAAC,KAAD,CAAO,OAAP,yBACE,MAAC,MAAD,EAAQ,OAAO,CAAE,KAAKK,QAAtB,CAAgC,KAAK,CAAC,OAAtC,CAA8C,QAAQ,KAAtD,wBACE,KAAC,IAAD,EAAM,IAAI,CAAC,WAAX,EADF,WADF,cAIE,MAAC,MAAD,EAAQ,KAAK,CAAC,KAAd,CAAoB,QAAQ,KAA5B,CAA6B,OAAO,CAAEG,UAAtC,wBACE,KAAC,IAAD,EAAM,IAAI,CAAC,QAAX,EADF,aAJF,GAXF,GADF,CAsBD,C,uBAzDqBlB,KAAK,CAAC4B,S,EA4D9B,cAAetB,CAAAA,SAAf","sourcesContent":["import React from \"react\";\nimport mime from \"mime-types\";\nimport { Modal, Input, Button, Icon } from \"semantic-ui-react\";\n\nclass FileModal extends React.Component {\n  state = {\n    file: null,\n    authorized: [\"image/jpeg\", \"image/png\"]\n  };\n\n  addFile = event => {\n    const file = event.target.files[0];\n    if (file) {\n      this.setState({ file });\n    }\n  };\n\n  sendFile = () => {\n    const { file } = this.state;\n    const { uploadFile, closeModal } = this.props;\n\n    if (file !== null) {\n      if (this.isAuthorized(file.name)) {\n        const metadata = { contentType: mime.lookup(file.name) };\n        uploadFile(file, metadata);\n        closeModal();\n        this.clearFile();\n      }\n    }\n  };\n\n  isAuthorized = filename =>\n    this.state.authorized.includes(mime.lookup(filename));\n\n  clearFile = () => this.setState({ file: null });\n\n  render() {\n    const { modal, closeModal } = this.props;\n\n    return (\n      <Modal basic open={modal} onClose={closeModal}>\n        <Modal.Header>Select an Image File</Modal.Header>\n        <Modal.Content>\n          <Input\n            onChange={this.addFile}\n            fluid\n            label=\"File types: jpg, png\"\n            name=\"file\"\n            type=\"file\"\n          />\n        </Modal.Content>\n        <Modal.Actions>\n          <Button onClick={this.sendFile} color=\"green\" inverted>\n            <Icon name=\"checkmark\" /> Send\n          </Button>\n          <Button color=\"red\" inverted onClick={closeModal}>\n            <Icon name=\"remove\" /> Cancel\n          </Button>\n        </Modal.Actions>\n      </Modal>\n    );\n  }\n}\n\nexport default FileModal;\n"]},"metadata":{},"sourceType":"module"}