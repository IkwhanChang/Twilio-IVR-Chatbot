{"ast":null,"code":"import _Object$values from 'babel-runtime/core-js/object/values';\nimport _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport _extends from '../../polyfills/extends';\nimport _Object$getPrototypeOf from '../../polyfills/objectGetPrototypeOf';\nimport _classCallCheck from '../../polyfills/classCallCheck';\nimport _createClass from '../../polyfills/createClass';\nimport _possibleConstructorReturn from '../../polyfills/possibleConstructorReturn';\nimport _inherits from '../../polyfills/inherits';\nimport '../../vendor/raf-polyfill';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport * as icons from '../../svgs';\nimport store from '../../utils/store';\nimport frequently from '../../utils/frequently';\nimport { deepMerge, measureScrollbar, getSanitizedData } from '../../utils';\nimport { uncompress } from '../../utils/data';\nimport { PickerPropTypes } from '../../utils/shared-props';\nimport Anchors from '../anchors';\nimport Category from '../category';\nimport Preview from '../preview';\nimport Search from '../search';\nimport { PickerDefaultProps } from '../../utils/shared-default-props';\nvar I18N = {\n  search: 'Search',\n  clear: 'Clear',\n  // Accessible label on \"clear\" button\n  notfound: 'No Emoji Found',\n  skintext: 'Choose your default skin tone',\n  categories: {\n    search: 'Search Results',\n    recent: 'Frequently Used',\n    people: 'Smileys & People',\n    nature: 'Animals & Nature',\n    foods: 'Food & Drink',\n    activity: 'Activity',\n    places: 'Travel & Places',\n    objects: 'Objects',\n    symbols: 'Symbols',\n    flags: 'Flags',\n    custom: 'Custom'\n  },\n  categorieslabel: 'Emoji categories',\n  // Accessible title for the list of categories\n  skintones: {\n    1: 'Default Skin Tone',\n    2: 'Light Skin Tone',\n    3: 'Medium-Light Skin Tone',\n    4: 'Medium Skin Tone',\n    5: 'Medium-Dark Skin Tone',\n    6: 'Dark Skin Tone'\n  }\n};\n\nvar NimblePicker = function (_React$PureComponent) {\n  _inherits(NimblePicker, _React$PureComponent);\n\n  function NimblePicker(props) {\n    _classCallCheck(this, NimblePicker);\n\n    var _this = _possibleConstructorReturn(this, (NimblePicker.__proto__ || _Object$getPrototypeOf(NimblePicker)).call(this, props));\n\n    _this.CUSTOM = [];\n    _this.RECENT_CATEGORY = {\n      id: 'recent',\n      name: 'Recent',\n      emojis: null\n    };\n    _this.SEARCH_CATEGORY = {\n      id: 'search',\n      name: 'Search',\n      emojis: null,\n      anchor: false\n    };\n\n    if (props.data.compressed) {\n      uncompress(props.data);\n    }\n\n    _this.data = props.data;\n    _this.i18n = deepMerge(I18N, props.i18n);\n    _this.icons = deepMerge(icons, props.icons);\n    _this.state = {\n      skin: props.skin || store.get('skin') || props.defaultSkin,\n      firstRender: true\n    };\n    _this.categories = [];\n    var allCategories = [].concat(_this.data.categories);\n\n    if (props.custom.length > 0) {\n      var customCategories = {};\n      var customCategoriesCreated = 0;\n      props.custom.forEach(function (emoji) {\n        if (!customCategories[emoji.customCategory]) {\n          customCategories[emoji.customCategory] = {\n            id: emoji.customCategory ? 'custom-' + emoji.customCategory : 'custom',\n            name: emoji.customCategory || 'Custom',\n            emojis: [],\n            anchor: customCategoriesCreated === 0\n          };\n          customCategoriesCreated++;\n        }\n\n        var category = customCategories[emoji.customCategory];\n\n        var customEmoji = _extends({}, emoji, {\n          // `<Category />` expects emoji to have an `id`.\n          id: emoji.short_names[0],\n          custom: true\n        });\n\n        category.emojis.push(customEmoji);\n\n        _this.CUSTOM.push(customEmoji);\n      });\n      allCategories.push.apply(allCategories, _toConsumableArray(_Object$values(customCategories)));\n    }\n\n    _this.hideRecent = true;\n\n    if (props.include != undefined) {\n      allCategories.sort(function (a, b) {\n        if (props.include.indexOf(a.id) > props.include.indexOf(b.id)) {\n          return 1;\n        }\n\n        return -1;\n      });\n    }\n\n    for (var categoryIndex = 0; categoryIndex < allCategories.length; categoryIndex++) {\n      var category = allCategories[categoryIndex];\n      var isIncluded = props.include && props.include.length ? props.include.indexOf(category.id) > -1 : true;\n      var isExcluded = props.exclude && props.exclude.length ? props.exclude.indexOf(category.id) > -1 : false;\n\n      if (!isIncluded || isExcluded) {\n        continue;\n      }\n\n      if (props.emojisToShowFilter) {\n        var newEmojis = [];\n        var emojis = category.emojis;\n\n        for (var emojiIndex = 0; emojiIndex < emojis.length; emojiIndex++) {\n          var emoji = emojis[emojiIndex];\n\n          if (props.emojisToShowFilter(_this.data.emojis[emoji] || emoji)) {\n            newEmojis.push(emoji);\n          }\n        }\n\n        if (newEmojis.length) {\n          var newCategory = {\n            emojis: newEmojis,\n            name: category.name,\n            id: category.id\n          };\n\n          _this.categories.push(newCategory);\n        }\n      } else {\n        _this.categories.push(category);\n      }\n    }\n\n    var includeRecent = props.include && props.include.length ? props.include.indexOf(_this.RECENT_CATEGORY.id) > -1 : true;\n    var excludeRecent = props.exclude && props.exclude.length ? props.exclude.indexOf(_this.RECENT_CATEGORY.id) > -1 : false;\n\n    if (includeRecent && !excludeRecent) {\n      _this.hideRecent = false;\n\n      _this.categories.unshift(_this.RECENT_CATEGORY);\n    }\n\n    if (_this.categories[0]) {\n      _this.categories[0].first = true;\n    }\n\n    _this.categories.unshift(_this.SEARCH_CATEGORY);\n\n    _this.setAnchorsRef = _this.setAnchorsRef.bind(_this);\n    _this.handleAnchorClick = _this.handleAnchorClick.bind(_this);\n    _this.setSearchRef = _this.setSearchRef.bind(_this);\n    _this.handleSearch = _this.handleSearch.bind(_this);\n    _this.setScrollRef = _this.setScrollRef.bind(_this);\n    _this.handleScroll = _this.handleScroll.bind(_this);\n    _this.handleScrollPaint = _this.handleScrollPaint.bind(_this);\n    _this.handleEmojiOver = _this.handleEmojiOver.bind(_this);\n    _this.handleEmojiLeave = _this.handleEmojiLeave.bind(_this);\n    _this.handleEmojiClick = _this.handleEmojiClick.bind(_this);\n    _this.handleEmojiSelect = _this.handleEmojiSelect.bind(_this);\n    _this.setPreviewRef = _this.setPreviewRef.bind(_this);\n    _this.handleSkinChange = _this.handleSkinChange.bind(_this);\n    _this.handleKeyDown = _this.handleKeyDown.bind(_this);\n    return _this;\n  }\n\n  _createClass(NimblePicker, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (this.state.firstRender) {\n        this.testStickyPosition();\n        this.firstRenderTimeout = setTimeout(function () {\n          _this2.setState({\n            firstRender: false\n          });\n        }, 60);\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      this.updateCategoriesSize();\n      this.handleScroll();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.SEARCH_CATEGORY.emojis = null;\n      clearTimeout(this.leaveTimeout);\n      clearTimeout(this.firstRenderTimeout);\n    }\n  }, {\n    key: 'testStickyPosition',\n    value: function testStickyPosition() {\n      var stickyTestElement = document.createElement('div');\n      var prefixes = ['', '-webkit-', '-ms-', '-moz-', '-o-'];\n      prefixes.forEach(function (prefix) {\n        return stickyTestElement.style.position = prefix + 'sticky';\n      });\n      this.hasStickyPosition = !!stickyTestElement.style.position.length;\n    }\n  }, {\n    key: 'handleEmojiOver',\n    value: function handleEmojiOver(emoji) {\n      var preview = this.preview;\n\n      if (!preview) {\n        return;\n      } // Use Array.prototype.find() when it is more widely supported.\n\n\n      var emojiData = this.CUSTOM.filter(function (customEmoji) {\n        return customEmoji.id === emoji.id;\n      })[0];\n\n      for (var key in emojiData) {\n        if (emojiData.hasOwnProperty(key)) {\n          emoji[key] = emojiData[key];\n        }\n      }\n\n      preview.setState({\n        emoji: emoji\n      });\n      clearTimeout(this.leaveTimeout);\n    }\n  }, {\n    key: 'handleEmojiLeave',\n    value: function handleEmojiLeave(emoji) {\n      var preview = this.preview;\n\n      if (!preview) {\n        return;\n      }\n\n      this.leaveTimeout = setTimeout(function () {\n        preview.setState({\n          emoji: null\n        });\n      }, 16);\n    }\n  }, {\n    key: 'handleEmojiClick',\n    value: function handleEmojiClick(emoji, e) {\n      this.props.onClick(emoji, e);\n      this.handleEmojiSelect(emoji);\n    }\n  }, {\n    key: 'handleEmojiSelect',\n    value: function handleEmojiSelect(emoji) {\n      var _this3 = this;\n\n      this.props.onSelect(emoji);\n      if (!this.hideRecent && !this.props.recent) frequently.add(emoji);\n      var component = this.categoryRefs['category-1'];\n\n      if (component) {\n        var maxMargin = component.maxMargin;\n        component.forceUpdate();\n        window.requestAnimationFrame(function () {\n          if (!_this3.scroll) return;\n          component.memoizeSize();\n          if (maxMargin == component.maxMargin) return;\n\n          _this3.updateCategoriesSize();\n\n          _this3.handleScrollPaint();\n\n          if (_this3.SEARCH_CATEGORY.emojis) {\n            component.updateDisplay('none');\n          }\n        });\n      }\n    }\n  }, {\n    key: 'handleScroll',\n    value: function handleScroll() {\n      if (!this.waitingForPaint) {\n        this.waitingForPaint = true;\n        window.requestAnimationFrame(this.handleScrollPaint);\n      }\n    }\n  }, {\n    key: 'handleScrollPaint',\n    value: function handleScrollPaint() {\n      this.waitingForPaint = false;\n\n      if (!this.scroll) {\n        return;\n      }\n\n      var activeCategory = null;\n\n      if (this.SEARCH_CATEGORY.emojis) {\n        activeCategory = this.SEARCH_CATEGORY;\n      } else {\n        var target = this.scroll,\n            scrollTop = target.scrollTop,\n            scrollingDown = scrollTop > (this.scrollTop || 0),\n            minTop = 0;\n\n        for (var i = 0, l = this.categories.length; i < l; i++) {\n          var ii = scrollingDown ? this.categories.length - 1 - i : i,\n              category = this.categories[ii],\n              component = this.categoryRefs['category-' + ii];\n\n          if (component) {\n            var active = component.handleScroll(scrollTop);\n\n            if (!minTop || component.top < minTop) {\n              if (component.top > 0) {\n                minTop = component.top;\n              }\n            }\n\n            if (active && !activeCategory) {\n              activeCategory = category;\n            }\n          }\n        }\n\n        if (scrollTop < minTop) {\n          activeCategory = this.categories.filter(function (category) {\n            return !(category.anchor === false);\n          })[0];\n        } else if (scrollTop + this.clientHeight >= this.scrollHeight) {\n          activeCategory = this.categories[this.categories.length - 1];\n        }\n      }\n\n      if (activeCategory) {\n        var anchors = this.anchors;\n        var _activeCategory = activeCategory;\n        var categoryName = _activeCategory.name;\n\n        if (anchors.state.selected != categoryName) {\n          anchors.setState({\n            selected: categoryName\n          });\n        }\n      }\n\n      this.scrollTop = scrollTop;\n    }\n  }, {\n    key: 'handleSearch',\n    value: function handleSearch(emojis) {\n      this.SEARCH_CATEGORY.emojis = emojis;\n\n      for (var i = 0, l = this.categories.length; i < l; i++) {\n        var component = this.categoryRefs['category-' + i];\n\n        if (component && component.props.name != 'Search') {\n          var display = emojis ? 'none' : 'inherit';\n          component.updateDisplay(display);\n        }\n      }\n\n      this.forceUpdate();\n\n      if (this.scroll) {\n        this.scroll.scrollTop = 0;\n      }\n\n      this.handleScroll();\n    }\n  }, {\n    key: 'handleAnchorClick',\n    value: function handleAnchorClick(category, i) {\n      var component = this.categoryRefs['category-' + i];\n      var scroll = this.scroll;\n      var anchors = this.anchors;\n      var scrollToComponent = null;\n\n      scrollToComponent = function scrollToComponent() {\n        if (component) {\n          var top = component.top;\n\n          if (category.first) {\n            top = 0;\n          } else {\n            top += 1;\n          }\n\n          scroll.scrollTop = top;\n        }\n      };\n\n      if (this.SEARCH_CATEGORY.emojis) {\n        this.handleSearch(null);\n        this.search.clear();\n        window.requestAnimationFrame(scrollToComponent);\n      } else {\n        scrollToComponent();\n      }\n    }\n  }, {\n    key: 'handleSkinChange',\n    value: function handleSkinChange(skin) {\n      var newState = {\n        skin: skin\n      };\n      var onSkinChange = this.props.onSkinChange;\n      this.setState(newState);\n      store.update(newState);\n      onSkinChange(skin);\n    }\n  }, {\n    key: 'handleKeyDown',\n    value: function handleKeyDown(e) {\n      var handled = false;\n\n      switch (e.keyCode) {\n        case 13:\n          var emoji = void 0;\n\n          if (this.SEARCH_CATEGORY.emojis && this.SEARCH_CATEGORY.emojis.length && (emoji = getSanitizedData(this.SEARCH_CATEGORY.emojis[0], this.state.skin, this.props.set, this.props.data))) {\n            this.handleEmojiSelect(emoji);\n            handled = true;\n          }\n\n          break;\n      }\n\n      if (handled) {\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: 'updateCategoriesSize',\n    value: function updateCategoriesSize() {\n      for (var i = 0, l = this.categories.length; i < l; i++) {\n        var component = this.categoryRefs['category-' + i];\n        if (component) component.memoizeSize();\n      }\n\n      if (this.scroll) {\n        var target = this.scroll;\n        this.scrollHeight = target.scrollHeight;\n        this.clientHeight = target.clientHeight;\n      }\n    }\n  }, {\n    key: 'getCategories',\n    value: function getCategories() {\n      return this.state.firstRender ? this.categories.slice(0, 3) : this.categories;\n    }\n  }, {\n    key: 'setAnchorsRef',\n    value: function setAnchorsRef(c) {\n      this.anchors = c;\n    }\n  }, {\n    key: 'setSearchRef',\n    value: function setSearchRef(c) {\n      this.search = c;\n    }\n  }, {\n    key: 'setPreviewRef',\n    value: function setPreviewRef(c) {\n      this.preview = c;\n    }\n  }, {\n    key: 'setScrollRef',\n    value: function setScrollRef(c) {\n      this.scroll = c;\n    }\n  }, {\n    key: 'setCategoryRef',\n    value: function setCategoryRef(name, c) {\n      if (!this.categoryRefs) {\n        this.categoryRefs = {};\n      }\n\n      this.categoryRefs[name] = c;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var _props = this.props;\n      var perLine = _props.perLine;\n      var emojiSize = _props.emojiSize;\n      var set = _props.set;\n      var sheetSize = _props.sheetSize;\n      var sheetColumns = _props.sheetColumns;\n      var sheetRows = _props.sheetRows;\n      var style = _props.style;\n      var title = _props.title;\n      var emoji = _props.emoji;\n      var color = _props.color;\n      var native = _props.native;\n      var backgroundImageFn = _props.backgroundImageFn;\n      var emojisToShowFilter = _props.emojisToShowFilter;\n      var showPreview = _props.showPreview;\n      var showSkinTones = _props.showSkinTones;\n      var emojiTooltip = _props.emojiTooltip;\n      var include = _props.include;\n      var exclude = _props.exclude;\n      var recent = _props.recent;\n      var autoFocus = _props.autoFocus;\n      var skinEmoji = _props.skinEmoji;\n      var notFound = _props.notFound;\n      var notFoundEmoji = _props.notFoundEmoji;\n      var darkMode = _props.darkMode;\n      var skin = this.state.skin;\n      var width = perLine * (emojiSize + 12) + 12 + 2 + measureScrollbar();\n      return React.createElement('section', {\n        style: _extends({\n          width: width\n        }, style),\n        className: 'emoji-mart ' + (darkMode ? 'emoji-mart-dark' : ''),\n        'aria-label': title,\n        onKeyDown: this.handleKeyDown\n      }, React.createElement('div', {\n        className: 'emoji-mart-bar'\n      }, React.createElement(Anchors, {\n        ref: this.setAnchorsRef,\n        data: this.data,\n        i18n: this.i18n,\n        color: color,\n        categories: this.categories,\n        onAnchorClick: this.handleAnchorClick,\n        icons: this.icons\n      })), React.createElement(Search, {\n        ref: this.setSearchRef,\n        onSearch: this.handleSearch,\n        data: this.data,\n        i18n: this.i18n,\n        emojisToShowFilter: emojisToShowFilter,\n        include: include,\n        exclude: exclude,\n        custom: this.CUSTOM,\n        autoFocus: autoFocus\n      }), React.createElement('div', {\n        ref: this.setScrollRef,\n        className: 'emoji-mart-scroll',\n        onScroll: this.handleScroll\n      }, this.getCategories().map(function (category, i) {\n        return React.createElement(Category, {\n          ref: _this4.setCategoryRef.bind(_this4, 'category-' + i),\n          key: category.name,\n          id: category.id,\n          name: category.name,\n          emojis: category.emojis,\n          perLine: perLine,\n          native: native,\n          hasStickyPosition: _this4.hasStickyPosition,\n          data: _this4.data,\n          i18n: _this4.i18n,\n          recent: category.id == _this4.RECENT_CATEGORY.id ? recent : undefined,\n          custom: category.id == _this4.RECENT_CATEGORY.id ? _this4.CUSTOM : undefined,\n          emojiProps: {\n            native: native,\n            skin: skin,\n            size: emojiSize,\n            set: set,\n            sheetSize: sheetSize,\n            sheetColumns: sheetColumns,\n            sheetRows: sheetRows,\n            forceSize: native,\n            tooltip: emojiTooltip,\n            backgroundImageFn: backgroundImageFn,\n            onOver: _this4.handleEmojiOver,\n            onLeave: _this4.handleEmojiLeave,\n            onClick: _this4.handleEmojiClick\n          },\n          notFound: notFound,\n          notFoundEmoji: notFoundEmoji\n        });\n      })), (showPreview || showSkinTones) && React.createElement('div', {\n        className: 'emoji-mart-bar'\n      }, React.createElement(Preview, {\n        ref: this.setPreviewRef,\n        data: this.data,\n        title: title,\n        emoji: emoji,\n        showSkinTones: showSkinTones,\n        showPreview: showPreview,\n        emojiProps: {\n          native: native,\n          size: 38,\n          skin: skin,\n          set: set,\n          sheetSize: sheetSize,\n          sheetColumns: sheetColumns,\n          sheetRows: sheetRows,\n          backgroundImageFn: backgroundImageFn\n        },\n        skinsProps: {\n          skin: skin,\n          onChange: this.handleSkinChange,\n          skinEmoji: skinEmoji\n        },\n        i18n: this.i18n\n      })));\n    }\n  }], [{\n    key: 'getDerivedStateFromProps',\n    value: function getDerivedStateFromProps(props, state) {\n      if (props.skin) {\n        return _extends({}, state, {\n          skin: props.skin\n        });\n      } else if (props.defaultSkin && !store.get('skin')) {\n        return _extends({}, state, {\n          skin: props.defaultSkin\n        });\n      }\n\n      return state;\n    }\n  }]);\n\n  return NimblePicker;\n}(React.PureComponent);\n\nexport default NimblePicker;\nNimblePicker.propTypes\n/* remove-proptypes */\n= _extends({}, PickerPropTypes, {\n  data: PropTypes.object.isRequired\n});\nNimblePicker.defaultProps = _extends({}, PickerDefaultProps);","map":{"version":3,"sources":["/Users/matthewchang/workspace/github/SEM2020/store-owner-console/node_modules/emoji-mart/dist-es/components/picker/nimble-picker.js"],"names":["_Object$values","_toConsumableArray","_extends","_Object$getPrototypeOf","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","React","PropTypes","icons","store","frequently","deepMerge","measureScrollbar","getSanitizedData","uncompress","PickerPropTypes","Anchors","Category","Preview","Search","PickerDefaultProps","I18N","search","clear","notfound","skintext","categories","recent","people","nature","foods","activity","places","objects","symbols","flags","custom","categorieslabel","skintones","NimblePicker","_React$PureComponent","props","_this","__proto__","call","CUSTOM","RECENT_CATEGORY","id","name","emojis","SEARCH_CATEGORY","anchor","data","compressed","i18n","state","skin","get","defaultSkin","firstRender","allCategories","concat","length","customCategories","customCategoriesCreated","forEach","emoji","customCategory","category","customEmoji","short_names","push","apply","hideRecent","include","undefined","sort","a","b","indexOf","categoryIndex","isIncluded","isExcluded","exclude","emojisToShowFilter","newEmojis","emojiIndex","newCategory","includeRecent","excludeRecent","unshift","first","setAnchorsRef","bind","handleAnchorClick","setSearchRef","handleSearch","setScrollRef","handleScroll","handleScrollPaint","handleEmojiOver","handleEmojiLeave","handleEmojiClick","handleEmojiSelect","setPreviewRef","handleSkinChange","handleKeyDown","key","value","componentDidMount","_this2","testStickyPosition","firstRenderTimeout","setTimeout","setState","componentDidUpdate","updateCategoriesSize","componentWillUnmount","clearTimeout","leaveTimeout","stickyTestElement","document","createElement","prefixes","prefix","style","position","hasStickyPosition","preview","emojiData","filter","hasOwnProperty","e","onClick","_this3","onSelect","add","component","categoryRefs","maxMargin","forceUpdate","window","requestAnimationFrame","scroll","memoizeSize","updateDisplay","waitingForPaint","activeCategory","target","scrollTop","scrollingDown","minTop","i","l","ii","active","top","clientHeight","scrollHeight","anchors","_activeCategory","categoryName","selected","display","scrollToComponent","newState","onSkinChange","update","handled","keyCode","set","preventDefault","getCategories","slice","c","setCategoryRef","render","_this4","_props","perLine","emojiSize","sheetSize","sheetColumns","sheetRows","title","color","native","backgroundImageFn","showPreview","showSkinTones","emojiTooltip","autoFocus","skinEmoji","notFound","notFoundEmoji","darkMode","width","className","onKeyDown","ref","onAnchorClick","onSearch","onScroll","map","emojiProps","size","forceSize","tooltip","onOver","onLeave","skinsProps","onChange","getDerivedStateFromProps","PureComponent","propTypes","object","isRequired","defaultProps"],"mappings":"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","sourcesContent":["import _Object$values from 'babel-runtime/core-js/object/values';\nimport _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport _extends from '../../polyfills/extends';\nimport _Object$getPrototypeOf from '../../polyfills/objectGetPrototypeOf';\nimport _classCallCheck from '../../polyfills/classCallCheck';\nimport _createClass from '../../polyfills/createClass';\nimport _possibleConstructorReturn from '../../polyfills/possibleConstructorReturn';\nimport _inherits from '../../polyfills/inherits';\nimport '../../vendor/raf-polyfill';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport * as icons from '../../svgs';\nimport store from '../../utils/store';\nimport frequently from '../../utils/frequently';\nimport { deepMerge, measureScrollbar, getSanitizedData } from '../../utils';\nimport { uncompress } from '../../utils/data';\nimport { PickerPropTypes } from '../../utils/shared-props';\n\nimport Anchors from '../anchors';\nimport Category from '../category';\nimport Preview from '../preview';\nimport Search from '../search';\nimport { PickerDefaultProps } from '../../utils/shared-default-props';\n\nvar I18N = {\n  search: 'Search',\n  clear: 'Clear', // Accessible label on \"clear\" button\n  notfound: 'No Emoji Found',\n  skintext: 'Choose your default skin tone',\n  categories: {\n    search: 'Search Results',\n    recent: 'Frequently Used',\n    people: 'Smileys & People',\n    nature: 'Animals & Nature',\n    foods: 'Food & Drink',\n    activity: 'Activity',\n    places: 'Travel & Places',\n    objects: 'Objects',\n    symbols: 'Symbols',\n    flags: 'Flags',\n    custom: 'Custom'\n  },\n  categorieslabel: 'Emoji categories', // Accessible title for the list of categories\n  skintones: {\n    1: 'Default Skin Tone',\n    2: 'Light Skin Tone',\n    3: 'Medium-Light Skin Tone',\n    4: 'Medium Skin Tone',\n    5: 'Medium-Dark Skin Tone',\n    6: 'Dark Skin Tone'\n  }\n};\n\nvar NimblePicker = function (_React$PureComponent) {\n  _inherits(NimblePicker, _React$PureComponent);\n\n  function NimblePicker(props) {\n    _classCallCheck(this, NimblePicker);\n\n    var _this = _possibleConstructorReturn(this, (NimblePicker.__proto__ || _Object$getPrototypeOf(NimblePicker)).call(this, props));\n\n    _this.CUSTOM = [];\n\n    _this.RECENT_CATEGORY = { id: 'recent', name: 'Recent', emojis: null };\n    _this.SEARCH_CATEGORY = {\n      id: 'search',\n      name: 'Search',\n      emojis: null,\n      anchor: false\n    };\n\n    if (props.data.compressed) {\n      uncompress(props.data);\n    }\n\n    _this.data = props.data;\n    _this.i18n = deepMerge(I18N, props.i18n);\n    _this.icons = deepMerge(icons, props.icons);\n    _this.state = {\n      skin: props.skin || store.get('skin') || props.defaultSkin,\n      firstRender: true\n    };\n\n    _this.categories = [];\n    var allCategories = [].concat(_this.data.categories);\n\n    if (props.custom.length > 0) {\n      var customCategories = {};\n      var customCategoriesCreated = 0;\n\n      props.custom.forEach(function (emoji) {\n        if (!customCategories[emoji.customCategory]) {\n          customCategories[emoji.customCategory] = {\n            id: emoji.customCategory ? 'custom-' + emoji.customCategory : 'custom',\n            name: emoji.customCategory || 'Custom',\n            emojis: [],\n            anchor: customCategoriesCreated === 0\n          };\n\n          customCategoriesCreated++;\n        }\n\n        var category = customCategories[emoji.customCategory];\n\n        var customEmoji = _extends({}, emoji, {\n          // `<Category />` expects emoji to have an `id`.\n          id: emoji.short_names[0],\n          custom: true\n        });\n\n        category.emojis.push(customEmoji);\n        _this.CUSTOM.push(customEmoji);\n      });\n\n      allCategories.push.apply(allCategories, _toConsumableArray(_Object$values(customCategories)));\n    }\n\n    _this.hideRecent = true;\n\n    if (props.include != undefined) {\n      allCategories.sort(function (a, b) {\n        if (props.include.indexOf(a.id) > props.include.indexOf(b.id)) {\n          return 1;\n        }\n\n        return -1;\n      });\n    }\n\n    for (var categoryIndex = 0; categoryIndex < allCategories.length; categoryIndex++) {\n      var category = allCategories[categoryIndex];\n      var isIncluded = props.include && props.include.length ? props.include.indexOf(category.id) > -1 : true;\n      var isExcluded = props.exclude && props.exclude.length ? props.exclude.indexOf(category.id) > -1 : false;\n      if (!isIncluded || isExcluded) {\n        continue;\n      }\n\n      if (props.emojisToShowFilter) {\n        var newEmojis = [];\n\n        var emojis = category.emojis;\n\n        for (var emojiIndex = 0; emojiIndex < emojis.length; emojiIndex++) {\n          var emoji = emojis[emojiIndex];\n          if (props.emojisToShowFilter(_this.data.emojis[emoji] || emoji)) {\n            newEmojis.push(emoji);\n          }\n        }\n\n        if (newEmojis.length) {\n          var newCategory = {\n            emojis: newEmojis,\n            name: category.name,\n            id: category.id\n          };\n\n          _this.categories.push(newCategory);\n        }\n      } else {\n        _this.categories.push(category);\n      }\n    }\n\n    var includeRecent = props.include && props.include.length ? props.include.indexOf(_this.RECENT_CATEGORY.id) > -1 : true;\n    var excludeRecent = props.exclude && props.exclude.length ? props.exclude.indexOf(_this.RECENT_CATEGORY.id) > -1 : false;\n    if (includeRecent && !excludeRecent) {\n      _this.hideRecent = false;\n      _this.categories.unshift(_this.RECENT_CATEGORY);\n    }\n\n    if (_this.categories[0]) {\n      _this.categories[0].first = true;\n    }\n\n    _this.categories.unshift(_this.SEARCH_CATEGORY);\n\n    _this.setAnchorsRef = _this.setAnchorsRef.bind(_this);\n    _this.handleAnchorClick = _this.handleAnchorClick.bind(_this);\n    _this.setSearchRef = _this.setSearchRef.bind(_this);\n    _this.handleSearch = _this.handleSearch.bind(_this);\n    _this.setScrollRef = _this.setScrollRef.bind(_this);\n    _this.handleScroll = _this.handleScroll.bind(_this);\n    _this.handleScrollPaint = _this.handleScrollPaint.bind(_this);\n    _this.handleEmojiOver = _this.handleEmojiOver.bind(_this);\n    _this.handleEmojiLeave = _this.handleEmojiLeave.bind(_this);\n    _this.handleEmojiClick = _this.handleEmojiClick.bind(_this);\n    _this.handleEmojiSelect = _this.handleEmojiSelect.bind(_this);\n    _this.setPreviewRef = _this.setPreviewRef.bind(_this);\n    _this.handleSkinChange = _this.handleSkinChange.bind(_this);\n    _this.handleKeyDown = _this.handleKeyDown.bind(_this);\n    return _this;\n  }\n\n  _createClass(NimblePicker, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (this.state.firstRender) {\n        this.testStickyPosition();\n        this.firstRenderTimeout = setTimeout(function () {\n          _this2.setState({ firstRender: false });\n        }, 60);\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      this.updateCategoriesSize();\n      this.handleScroll();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.SEARCH_CATEGORY.emojis = null;\n\n      clearTimeout(this.leaveTimeout);\n      clearTimeout(this.firstRenderTimeout);\n    }\n  }, {\n    key: 'testStickyPosition',\n    value: function testStickyPosition() {\n      var stickyTestElement = document.createElement('div');\n\n      var prefixes = ['', '-webkit-', '-ms-', '-moz-', '-o-'];\n\n      prefixes.forEach(function (prefix) {\n        return stickyTestElement.style.position = prefix + 'sticky';\n      });\n\n      this.hasStickyPosition = !!stickyTestElement.style.position.length;\n    }\n  }, {\n    key: 'handleEmojiOver',\n    value: function handleEmojiOver(emoji) {\n      var preview = this.preview;\n\n      if (!preview) {\n        return;\n      }\n\n      // Use Array.prototype.find() when it is more widely supported.\n      var emojiData = this.CUSTOM.filter(function (customEmoji) {\n        return customEmoji.id === emoji.id;\n      })[0];\n      for (var key in emojiData) {\n        if (emojiData.hasOwnProperty(key)) {\n          emoji[key] = emojiData[key];\n        }\n      }\n\n      preview.setState({ emoji: emoji });\n      clearTimeout(this.leaveTimeout);\n    }\n  }, {\n    key: 'handleEmojiLeave',\n    value: function handleEmojiLeave(emoji) {\n      var preview = this.preview;\n\n      if (!preview) {\n        return;\n      }\n\n      this.leaveTimeout = setTimeout(function () {\n        preview.setState({ emoji: null });\n      }, 16);\n    }\n  }, {\n    key: 'handleEmojiClick',\n    value: function handleEmojiClick(emoji, e) {\n      this.props.onClick(emoji, e);\n      this.handleEmojiSelect(emoji);\n    }\n  }, {\n    key: 'handleEmojiSelect',\n    value: function handleEmojiSelect(emoji) {\n      var _this3 = this;\n\n      this.props.onSelect(emoji);\n      if (!this.hideRecent && !this.props.recent) frequently.add(emoji);\n\n      var component = this.categoryRefs['category-1'];\n      if (component) {\n        var maxMargin = component.maxMargin;\n        component.forceUpdate();\n\n        window.requestAnimationFrame(function () {\n          if (!_this3.scroll) return;\n          component.memoizeSize();\n          if (maxMargin == component.maxMargin) return;\n\n          _this3.updateCategoriesSize();\n          _this3.handleScrollPaint();\n\n          if (_this3.SEARCH_CATEGORY.emojis) {\n            component.updateDisplay('none');\n          }\n        });\n      }\n    }\n  }, {\n    key: 'handleScroll',\n    value: function handleScroll() {\n      if (!this.waitingForPaint) {\n        this.waitingForPaint = true;\n        window.requestAnimationFrame(this.handleScrollPaint);\n      }\n    }\n  }, {\n    key: 'handleScrollPaint',\n    value: function handleScrollPaint() {\n      this.waitingForPaint = false;\n\n      if (!this.scroll) {\n        return;\n      }\n\n      var activeCategory = null;\n\n      if (this.SEARCH_CATEGORY.emojis) {\n        activeCategory = this.SEARCH_CATEGORY;\n      } else {\n        var target = this.scroll,\n            scrollTop = target.scrollTop,\n            scrollingDown = scrollTop > (this.scrollTop || 0),\n            minTop = 0;\n\n        for (var i = 0, l = this.categories.length; i < l; i++) {\n          var ii = scrollingDown ? this.categories.length - 1 - i : i,\n              category = this.categories[ii],\n              component = this.categoryRefs['category-' + ii];\n\n          if (component) {\n            var active = component.handleScroll(scrollTop);\n\n            if (!minTop || component.top < minTop) {\n              if (component.top > 0) {\n                minTop = component.top;\n              }\n            }\n\n            if (active && !activeCategory) {\n              activeCategory = category;\n            }\n          }\n        }\n\n        if (scrollTop < minTop) {\n          activeCategory = this.categories.filter(function (category) {\n            return !(category.anchor === false);\n          })[0];\n        } else if (scrollTop + this.clientHeight >= this.scrollHeight) {\n          activeCategory = this.categories[this.categories.length - 1];\n        }\n      }\n\n      if (activeCategory) {\n        var anchors = this.anchors;\n        var _activeCategory = activeCategory;\n        var categoryName = _activeCategory.name;\n\n\n        if (anchors.state.selected != categoryName) {\n          anchors.setState({ selected: categoryName });\n        }\n      }\n\n      this.scrollTop = scrollTop;\n    }\n  }, {\n    key: 'handleSearch',\n    value: function handleSearch(emojis) {\n      this.SEARCH_CATEGORY.emojis = emojis;\n\n      for (var i = 0, l = this.categories.length; i < l; i++) {\n        var component = this.categoryRefs['category-' + i];\n\n        if (component && component.props.name != 'Search') {\n          var display = emojis ? 'none' : 'inherit';\n          component.updateDisplay(display);\n        }\n      }\n\n      this.forceUpdate();\n      if (this.scroll) {\n        this.scroll.scrollTop = 0;\n      }\n      this.handleScroll();\n    }\n  }, {\n    key: 'handleAnchorClick',\n    value: function handleAnchorClick(category, i) {\n      var component = this.categoryRefs['category-' + i];\n      var scroll = this.scroll;\n      var anchors = this.anchors;\n      var scrollToComponent = null;\n\n      scrollToComponent = function scrollToComponent() {\n        if (component) {\n          var top = component.top;\n\n\n          if (category.first) {\n            top = 0;\n          } else {\n            top += 1;\n          }\n\n          scroll.scrollTop = top;\n        }\n      };\n\n      if (this.SEARCH_CATEGORY.emojis) {\n        this.handleSearch(null);\n        this.search.clear();\n\n        window.requestAnimationFrame(scrollToComponent);\n      } else {\n        scrollToComponent();\n      }\n    }\n  }, {\n    key: 'handleSkinChange',\n    value: function handleSkinChange(skin) {\n      var newState = { skin: skin };\n      var onSkinChange = this.props.onSkinChange;\n\n\n      this.setState(newState);\n      store.update(newState);\n\n      onSkinChange(skin);\n    }\n  }, {\n    key: 'handleKeyDown',\n    value: function handleKeyDown(e) {\n      var handled = false;\n\n      switch (e.keyCode) {\n        case 13:\n          var emoji = void 0;\n\n          if (this.SEARCH_CATEGORY.emojis && this.SEARCH_CATEGORY.emojis.length && (emoji = getSanitizedData(this.SEARCH_CATEGORY.emojis[0], this.state.skin, this.props.set, this.props.data))) {\n            this.handleEmojiSelect(emoji);\n            handled = true;\n          }\n\n          break;\n      }\n\n      if (handled) {\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: 'updateCategoriesSize',\n    value: function updateCategoriesSize() {\n      for (var i = 0, l = this.categories.length; i < l; i++) {\n        var component = this.categoryRefs['category-' + i];\n        if (component) component.memoizeSize();\n      }\n\n      if (this.scroll) {\n        var target = this.scroll;\n        this.scrollHeight = target.scrollHeight;\n        this.clientHeight = target.clientHeight;\n      }\n    }\n  }, {\n    key: 'getCategories',\n    value: function getCategories() {\n      return this.state.firstRender ? this.categories.slice(0, 3) : this.categories;\n    }\n  }, {\n    key: 'setAnchorsRef',\n    value: function setAnchorsRef(c) {\n      this.anchors = c;\n    }\n  }, {\n    key: 'setSearchRef',\n    value: function setSearchRef(c) {\n      this.search = c;\n    }\n  }, {\n    key: 'setPreviewRef',\n    value: function setPreviewRef(c) {\n      this.preview = c;\n    }\n  }, {\n    key: 'setScrollRef',\n    value: function setScrollRef(c) {\n      this.scroll = c;\n    }\n  }, {\n    key: 'setCategoryRef',\n    value: function setCategoryRef(name, c) {\n      if (!this.categoryRefs) {\n        this.categoryRefs = {};\n      }\n\n      this.categoryRefs[name] = c;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var _props = this.props;\n      var perLine = _props.perLine;\n      var emojiSize = _props.emojiSize;\n      var set = _props.set;\n      var sheetSize = _props.sheetSize;\n      var sheetColumns = _props.sheetColumns;\n      var sheetRows = _props.sheetRows;\n      var style = _props.style;\n      var title = _props.title;\n      var emoji = _props.emoji;\n      var color = _props.color;\n      var native = _props.native;\n      var backgroundImageFn = _props.backgroundImageFn;\n      var emojisToShowFilter = _props.emojisToShowFilter;\n      var showPreview = _props.showPreview;\n      var showSkinTones = _props.showSkinTones;\n      var emojiTooltip = _props.emojiTooltip;\n      var include = _props.include;\n      var exclude = _props.exclude;\n      var recent = _props.recent;\n      var autoFocus = _props.autoFocus;\n      var skinEmoji = _props.skinEmoji;\n      var notFound = _props.notFound;\n      var notFoundEmoji = _props.notFoundEmoji;\n      var darkMode = _props.darkMode;\n      var skin = this.state.skin;\n      var width = perLine * (emojiSize + 12) + 12 + 2 + measureScrollbar();\n\n      return React.createElement(\n        'section',\n        {\n          style: _extends({ width: width }, style),\n          className: 'emoji-mart ' + (darkMode ? 'emoji-mart-dark' : ''),\n          'aria-label': title,\n          onKeyDown: this.handleKeyDown\n        },\n        React.createElement(\n          'div',\n          { className: 'emoji-mart-bar' },\n          React.createElement(Anchors, {\n            ref: this.setAnchorsRef,\n            data: this.data,\n            i18n: this.i18n,\n            color: color,\n            categories: this.categories,\n            onAnchorClick: this.handleAnchorClick,\n            icons: this.icons\n          })\n        ),\n        React.createElement(Search, {\n          ref: this.setSearchRef,\n          onSearch: this.handleSearch,\n          data: this.data,\n          i18n: this.i18n,\n          emojisToShowFilter: emojisToShowFilter,\n          include: include,\n          exclude: exclude,\n          custom: this.CUSTOM,\n          autoFocus: autoFocus\n        }),\n        React.createElement(\n          'div',\n          {\n            ref: this.setScrollRef,\n            className: 'emoji-mart-scroll',\n            onScroll: this.handleScroll\n          },\n          this.getCategories().map(function (category, i) {\n            return React.createElement(Category, {\n              ref: _this4.setCategoryRef.bind(_this4, 'category-' + i),\n              key: category.name,\n              id: category.id,\n              name: category.name,\n              emojis: category.emojis,\n              perLine: perLine,\n              native: native,\n              hasStickyPosition: _this4.hasStickyPosition,\n              data: _this4.data,\n              i18n: _this4.i18n,\n              recent: category.id == _this4.RECENT_CATEGORY.id ? recent : undefined,\n              custom: category.id == _this4.RECENT_CATEGORY.id ? _this4.CUSTOM : undefined,\n              emojiProps: {\n                native: native,\n                skin: skin,\n                size: emojiSize,\n                set: set,\n                sheetSize: sheetSize,\n                sheetColumns: sheetColumns,\n                sheetRows: sheetRows,\n                forceSize: native,\n                tooltip: emojiTooltip,\n                backgroundImageFn: backgroundImageFn,\n                onOver: _this4.handleEmojiOver,\n                onLeave: _this4.handleEmojiLeave,\n                onClick: _this4.handleEmojiClick\n              },\n              notFound: notFound,\n              notFoundEmoji: notFoundEmoji\n            });\n          })\n        ),\n        (showPreview || showSkinTones) && React.createElement(\n          'div',\n          { className: 'emoji-mart-bar' },\n          React.createElement(Preview, {\n            ref: this.setPreviewRef,\n            data: this.data,\n            title: title,\n            emoji: emoji,\n            showSkinTones: showSkinTones,\n            showPreview: showPreview,\n            emojiProps: {\n              native: native,\n              size: 38,\n              skin: skin,\n              set: set,\n              sheetSize: sheetSize,\n              sheetColumns: sheetColumns,\n              sheetRows: sheetRows,\n              backgroundImageFn: backgroundImageFn\n            },\n            skinsProps: {\n              skin: skin,\n              onChange: this.handleSkinChange,\n              skinEmoji: skinEmoji\n            },\n            i18n: this.i18n\n          })\n        )\n      );\n    }\n  }], [{\n    key: 'getDerivedStateFromProps',\n    value: function getDerivedStateFromProps(props, state) {\n      if (props.skin) {\n        return _extends({}, state, {\n          skin: props.skin\n        });\n      } else if (props.defaultSkin && !store.get('skin')) {\n        return _extends({}, state, {\n          skin: props.defaultSkin\n        });\n      }\n      return state;\n    }\n  }]);\n\n  return NimblePicker;\n}(React.PureComponent);\n\nexport default NimblePicker;\n\n\nNimblePicker.propTypes /* remove-proptypes */ = _extends({}, PickerPropTypes, {\n  data: PropTypes.object.isRequired\n});\nNimblePicker.defaultProps = _extends({}, PickerDefaultProps);"]},"metadata":{},"sourceType":"module"}