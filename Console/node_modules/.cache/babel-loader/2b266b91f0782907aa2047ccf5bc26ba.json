{"ast":null,"code":"import _classCallCheck from\"/Users/matthewchang/workspace/github/SEM2020/store-owner-console/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/matthewchang/workspace/github/SEM2020/store-owner-console/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/matthewchang/workspace/github/SEM2020/store-owner-console/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/matthewchang/workspace/github/SEM2020/store-owner-console/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from\"react\";import firebase from\"../../firebase\";import{connect}from\"react-redux\";import{setColors}from\"../../actions\";// prettier-ignore\nimport{Sidebar,Menu,Divider,Button,Modal,Icon,Label,Segment}from\"semantic-ui-react\";import{SliderPicker}from\"react-color\";var ColorPanel=/*#__PURE__*/function(_React$Component){_inherits(ColorPanel,_React$Component);var _super=_createSuper(ColorPanel);function ColorPanel(){var _this;_classCallCheck(this,ColorPanel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={modal:false,primary:\"\",secondary:\"\",user:_this.props.currentUser,usersRef:firebase.database().ref(\"users\"),userColors:[]};_this.removeListener=function(){_this.state.usersRef.child(\"\".concat(_this.state.user.uid,\"/colors\")).off();};_this.addListener=function(userId){var userColors=[];_this.state.usersRef.child(\"\".concat(userId,\"/colors\")).on(\"child_added\",function(snap){userColors.unshift(snap.val());_this.setState({userColors:userColors});});};_this.handleChangePrimary=function(color){return _this.setState({primary:color.hex});};_this.handleChangeSecondary=function(color){return _this.setState({secondary:color.hex});};_this.handleSaveColors=function(){if(_this.state.primary&&_this.state.secondary){_this.saveColors(_this.state.primary,_this.state.secondary);}};_this.saveColors=function(primary,secondary){_this.state.usersRef.child(\"\".concat(_this.state.user.uid,\"/colors\")).push().update({primary:primary,secondary:secondary}).then(function(){console.log(\"Colors added\");_this.closeModal();}).catch(function(err){return console.error(err);});};_this.displayUserColors=function(colors){return colors.length>0&&colors.map(function(color,i){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(\"div\",{className:\"color__container\",onClick:function onClick(){return _this.props.setColors(color.primary,color.secondary);},children:/*#__PURE__*/_jsx(\"div\",{className:\"color__square\",style:{background:color.primary},children:/*#__PURE__*/_jsx(\"div\",{className:\"color__overlay\",style:{background:color.secondary}})})})]},i);});};_this.openModal=function(){return _this.setState({modal:true});};_this.closeModal=function(){return _this.setState({modal:false});};return _this;}_createClass(ColorPanel,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.state.user){this.addListener(this.state.user.uid);}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.removeListener();}},{key:\"render\",value:function render(){var _this$state=this.state,modal=_this$state.modal,primary=_this$state.primary,secondary=_this$state.secondary,userColors=_this$state.userColors;return/*#__PURE__*/_jsxs(Sidebar,{as:Menu,icon:\"labeled\",inverted:true,vertical:true,visible:true,width:\"very thin\",children:[/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Button,{icon:\"add\",size:\"small\",color:\"blue\",onClick:this.openModal}),this.displayUserColors(userColors),/*#__PURE__*/_jsxs(Modal,{basic:true,open:modal,onClose:this.closeModal,children:[/*#__PURE__*/_jsx(Modal.Header,{children:\"Choose App Colors\"}),/*#__PURE__*/_jsxs(Modal.Content,{children:[/*#__PURE__*/_jsxs(Segment,{inverted:true,children:[/*#__PURE__*/_jsx(Label,{content:\"Primary Color\"}),/*#__PURE__*/_jsx(SliderPicker,{color:primary,onChange:this.handleChangePrimary})]}),/*#__PURE__*/_jsxs(Segment,{inverted:true,children:[/*#__PURE__*/_jsx(Label,{content:\"Secondary Color\"}),/*#__PURE__*/_jsx(SliderPicker,{color:secondary,onChange:this.handleChangeSecondary})]})]}),/*#__PURE__*/_jsxs(Modal.Actions,{children:[/*#__PURE__*/_jsxs(Button,{color:\"green\",inverted:true,onClick:this.handleSaveColors,children:[/*#__PURE__*/_jsx(Icon,{name:\"checkmark\"}),\" Save Colors\"]}),/*#__PURE__*/_jsxs(Button,{color:\"red\",inverted:true,onClick:this.closeModal,children:[/*#__PURE__*/_jsx(Icon,{name:\"remove\"}),\" Cancel\"]})]})]})]});}}]);return ColorPanel;}(React.Component);export default connect(null,{setColors:setColors})(ColorPanel);","map":{"version":3,"sources":["/Users/matthewchang/workspace/github/SEM2020/store-owner-console/src/components/ColorPanel/ColorPanel.js"],"names":["React","firebase","connect","setColors","Sidebar","Menu","Divider","Button","Modal","Icon","Label","Segment","SliderPicker","ColorPanel","state","modal","primary","secondary","user","props","currentUser","usersRef","database","ref","userColors","removeListener","child","uid","off","addListener","userId","on","snap","unshift","val","setState","handleChangePrimary","color","hex","handleChangeSecondary","handleSaveColors","saveColors","push","update","then","console","log","closeModal","catch","err","error","displayUserColors","colors","length","map","i","background","openModal","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport firebase from \"../../firebase\";\nimport { connect } from \"react-redux\";\nimport { setColors } from \"../../actions\";\n// prettier-ignore\nimport { Sidebar, Menu, Divider, Button, Modal, Icon, Label, Segment } from \"semantic-ui-react\";\nimport { SliderPicker } from \"react-color\";\n\nclass ColorPanel extends React.Component {\n  state = {\n    modal: false,\n    primary: \"\",\n    secondary: \"\",\n    user: this.props.currentUser,\n    usersRef: firebase.database().ref(\"users\"),\n    userColors: []\n  };\n\n  componentDidMount() {\n    if (this.state.user) {\n      this.addListener(this.state.user.uid);\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeListener();\n  }\n\n  removeListener = () => {\n    this.state.usersRef.child(`${this.state.user.uid}/colors`).off();\n  };\n\n  addListener = userId => {\n    let userColors = [];\n    this.state.usersRef.child(`${userId}/colors`).on(\"child_added\", snap => {\n      userColors.unshift(snap.val());\n      this.setState({ userColors });\n    });\n  };\n\n  handleChangePrimary = color => this.setState({ primary: color.hex });\n\n  handleChangeSecondary = color => this.setState({ secondary: color.hex });\n\n  handleSaveColors = () => {\n    if (this.state.primary && this.state.secondary) {\n      this.saveColors(this.state.primary, this.state.secondary);\n    }\n  };\n\n  saveColors = (primary, secondary) => {\n    this.state.usersRef\n      .child(`${this.state.user.uid}/colors`)\n      .push()\n      .update({\n        primary,\n        secondary\n      })\n      .then(() => {\n        console.log(\"Colors added\");\n        this.closeModal();\n      })\n      .catch(err => console.error(err));\n  };\n\n  displayUserColors = colors =>\n    colors.length > 0 &&\n    colors.map((color, i) => (\n      <React.Fragment key={i}>\n        <Divider />\n        <div\n          className=\"color__container\"\n          onClick={() => this.props.setColors(color.primary, color.secondary)}\n        >\n          <div className=\"color__square\" style={{ background: color.primary }}>\n            <div\n              className=\"color__overlay\"\n              style={{ background: color.secondary }}\n            />\n          </div>\n        </div>\n      </React.Fragment>\n    ));\n\n  openModal = () => this.setState({ modal: true });\n\n  closeModal = () => this.setState({ modal: false });\n\n  render() {\n    const { modal, primary, secondary, userColors } = this.state;\n\n    return (\n      <Sidebar\n        as={Menu}\n        icon=\"labeled\"\n        inverted\n        vertical\n        visible\n        width=\"very thin\"\n      >\n        <Divider />\n        <Button icon=\"add\" size=\"small\" color=\"blue\" onClick={this.openModal} />\n        {this.displayUserColors(userColors)}\n\n        {/* Color Picker Modal */}\n        <Modal basic open={modal} onClose={this.closeModal}>\n          <Modal.Header>Choose App Colors</Modal.Header>\n          <Modal.Content>\n            <Segment inverted>\n              <Label content=\"Primary Color\" />\n              <SliderPicker\n                color={primary}\n                onChange={this.handleChangePrimary}\n              />\n            </Segment>\n\n            <Segment inverted>\n              <Label content=\"Secondary Color\" />\n              <SliderPicker\n                color={secondary}\n                onChange={this.handleChangeSecondary}\n              />\n            </Segment>\n          </Modal.Content>\n          <Modal.Actions>\n            <Button color=\"green\" inverted onClick={this.handleSaveColors}>\n              <Icon name=\"checkmark\" /> Save Colors\n            </Button>\n            <Button color=\"red\" inverted onClick={this.closeModal}>\n              <Icon name=\"remove\" /> Cancel\n            </Button>\n          </Modal.Actions>\n        </Modal>\n      </Sidebar>\n    );\n  }\n}\n\nexport default connect(\n  null,\n  { setColors }\n)(ColorPanel);\n"]},"metadata":{},"sourceType":"module"}