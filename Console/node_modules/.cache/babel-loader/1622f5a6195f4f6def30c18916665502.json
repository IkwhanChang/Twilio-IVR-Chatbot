{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/matthewchang/workspace/github/SEM2020/store-owner-console/src/components/Auth/Register.js\";\nimport React from \"react\";\nimport firebase from \"../../firebase\";\nimport md5 from \"md5\";\nimport { Grid, Form, Segment, Button, Header, Message, Icon } from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\n\nclass Register extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: \"\",\n      storeName: \"\",\n      openHour: \"\",\n      closeHour: \"\",\n      address1: \"\",\n      address2: \"\",\n      zipcode: \"\",\n      city: \"\",\n      state: \"\",\n      email: \"\",\n      password: \"\",\n      passwordConfirmation: \"\",\n      errors: [],\n      loading: false,\n      usersRef: firebase.database().ref(\"users\")\n    };\n\n    this.isFormValid = () => {\n      let errors = [];\n      let error;\n\n      if (this.isFormEmpty(this.state)) {\n        error = {\n          message: \"Fill in all fields\"\n        };\n        this.setState({\n          errors: errors.concat(error)\n        });\n        return false;\n      } else if (!this.isPasswordValid(this.state)) {\n        error = {\n          message: \"Password is invalid\"\n        };\n        this.setState({\n          errors: errors.concat(error)\n        });\n        return false;\n      } else {\n        return true;\n      }\n    };\n\n    this.isFormEmpty = ({\n      username,\n      storeName,\n      email,\n      password,\n      passwordConfirmation\n    }) => {\n      return !username.length || !storeName.length || !email.length || !password.length || !passwordConfirmation.length;\n    };\n\n    this.isPasswordValid = ({\n      password,\n      passwordConfirmation\n    }) => {\n      if (password.length < 6 || passwordConfirmation.length < 6) {\n        return false;\n      } else if (password !== passwordConfirmation) {\n        return false;\n      } else {\n        return true;\n      }\n    };\n\n    this.displayErrors = errors => errors.map((error, i) => /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error.message\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 30\n    }, this));\n\n    this.handleChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n\n      if (this.isFormValid()) {\n        this.setState({\n          errors: [],\n          loading: true\n        });\n        const {\n          storeName,\n          openHour,\n          closeHour,\n          address1,\n          address2,\n          zipcode,\n          city,\n          state\n        } = this.state;\n        firebase.auth().createUserWithEmailAndPassword(this.state.email, this.state.password).then(createdUser => {\n          console.log(createdUser);\n          createdUser.user.updateProfile({\n            displayName: this.state.username,\n            photoURL: `http://gravatar.com/avatar/${md5(createdUser.user.email)}?d=identicon`\n          }).then(() => {\n            this.saveUser({\n              createdUser,\n              storeName,\n              openHour,\n              closeHour,\n              address1,\n              address2,\n              zipcode,\n              city,\n              state\n            }).then(() => {\n              console.log(\"user saved\");\n            });\n          }).catch(err => {\n            console.error(err);\n            this.setState({\n              errors: this.state.errors.concat(err),\n              loading: false\n            });\n          });\n        }).catch(err => {\n          console.error(err);\n          this.setState({\n            errors: this.state.errors.concat(err),\n            loading: false\n          });\n        });\n      }\n    };\n\n    this.saveUser = ({\n      createdUser,\n      storeName,\n      openHour,\n      closeHour,\n      address1,\n      address2,\n      zipcode,\n      city,\n      state\n    }) => {\n      return this.state.usersRef.child(createdUser.user.uid).set({\n        name: createdUser.user.displayName,\n        avatar: createdUser.user.photoURL,\n        storeName,\n        openHour,\n        closeHour,\n        address1,\n        address2,\n        zipcode,\n        city,\n        state\n      });\n    };\n\n    this.handleInputError = (errors, inputName) => {\n      return errors.some(error => error.message.toLowerCase().includes(inputName)) ? \"error\" : \"\";\n    };\n  }\n\n  render() {\n    const {\n      username,\n      storeName,\n      openHour,\n      closeHour,\n      address1,\n      address2,\n      zipcode,\n      city,\n      state,\n      email,\n      password,\n      passwordConfirmation,\n      errors,\n      loading\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(Grid, {\n      textAlign: \"center\",\n      verticalAlign: \"middle\",\n      className: \"app\",\n      children: /*#__PURE__*/_jsxDEV(Grid.Column, {\n        style: {\n          maxWidth: 450\n        },\n        children: [/*#__PURE__*/_jsxDEV(Header, {\n          as: \"h1\",\n          icon: true,\n          color: \"orange\",\n          textAlign: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(Icon, {\n            name: \"add user\",\n            color: \"orange\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this), \"Register for IVRobot\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: this.handleSubmit,\n          size: \"large\",\n          children: /*#__PURE__*/_jsxDEV(Segment, {\n            stacked: true,\n            children: [/*#__PURE__*/_jsxDEV(Form.Input, {\n              fluid: true,\n              name: \"username\",\n              icon: \"user\",\n              iconPosition: \"left\",\n              placeholder: \"Username\",\n              onChange: this.handleChange,\n              value: username,\n              type: \"text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n              fluid: true,\n              name: \"storeName\",\n              icon: \"warehouse\",\n              iconPosition: \"left\",\n              placeholder: \"Store Name\",\n              onChange: this.handleChange,\n              value: storeName,\n              type: \"text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 1\n            }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n              fluid: true,\n              name: \"email\",\n              icon: \"mail\",\n              iconPosition: \"left\",\n              placeholder: \"Email Address\",\n              onChange: this.handleChange,\n              value: email,\n              className: this.handleInputError(errors, \"email\"),\n              type: \"email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n              fluid: true,\n              name: \"password\",\n              icon: \"lock\",\n              iconPosition: \"left\",\n              placeholder: \"Password\",\n              onChange: this.handleChange,\n              value: password,\n              className: this.handleInputError(errors, \"password\"),\n              type: \"password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n              fluid: true,\n              name: \"passwordConfirmation\",\n              icon: \"repeat\",\n              iconPosition: \"left\",\n              placeholder: \"Password Confirmation\",\n              onChange: this.handleChange,\n              value: passwordConfirmation,\n              className: this.handleInputError(errors, \"password\"),\n              type: \"password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n              fluid: true,\n              name: \"openHour\",\n              icon: \"clock outline\",\n              iconPosition: \"left\",\n              placeholder: \"Open Hour\",\n              onChange: this.handleChange,\n              value: openHour,\n              type: \"text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 1\n            }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n              fluid: true,\n              name: \"closeHour\",\n              icon: \"clock outline\",\n              iconPosition: \"left\",\n              placeholder: \"Close Hour\",\n              onChange: this.handleChange,\n              value: closeHour,\n              type: \"text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 1\n            }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n              fluid: true,\n              name: \"address1\",\n              icon: \"address book outline\",\n              iconPosition: \"left\",\n              placeholder: \"Address1\",\n              onChange: this.handleChange,\n              value: address1,\n              type: \"text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 1\n            }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n              fluid: true,\n              name: \"address2\",\n              icon: \"address book outline\",\n              iconPosition: \"left\",\n              placeholder: \"Address2\",\n              onChange: this.handleChange,\n              value: address2,\n              type: \"text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 1\n            }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n              fluid: true,\n              name: \"city\",\n              placeholder: \"City\",\n              onChange: this.handleChange,\n              value: city,\n              type: \"text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 1\n            }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n              fluid: true,\n              name: \"state\",\n              placeholder: \"State\",\n              onChange: this.handleChange,\n              value: state,\n              type: \"text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 1\n            }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n              fluid: true,\n              name: \"zipcode\",\n              placeholder: \"Zip Code\",\n              onChange: this.handleChange,\n              value: zipcode,\n              type: \"text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 1\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              disabled: loading,\n              className: loading ? \"loading\" : \"\",\n              color: \"orange\",\n              fluid: true,\n              size: \"large\",\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), errors.length > 0 && /*#__PURE__*/_jsxDEV(Message, {\n          error: true,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Error\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 15\n          }, this), this.displayErrors(errors)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Message, {\n          children: [\"Already a user? \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/login\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Register;","map":{"version":3,"sources":["/Users/matthewchang/workspace/github/SEM2020/store-owner-console/src/components/Auth/Register.js"],"names":["React","firebase","md5","Grid","Form","Segment","Button","Header","Message","Icon","Link","Register","Component","state","username","storeName","openHour","closeHour","address1","address2","zipcode","city","email","password","passwordConfirmation","errors","loading","usersRef","database","ref","isFormValid","error","isFormEmpty","message","setState","concat","isPasswordValid","length","displayErrors","map","i","handleChange","event","target","name","value","handleSubmit","preventDefault","auth","createUserWithEmailAndPassword","then","createdUser","console","log","user","updateProfile","displayName","photoURL","saveUser","catch","err","child","uid","set","avatar","handleInputError","inputName","some","toLowerCase","includes","render","maxWidth"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport firebase from \"../../firebase\";\nimport md5 from \"md5\";\nimport {\n  Grid,\n  Form,\n  Segment,\n  Button,\n  Header,\n  Message,\n  Icon\n} from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\n\nclass Register extends React.Component {\n  state = {\n    username: \"\",\n    storeName: \"\",\n    openHour: \"\",\n    closeHour: \"\",\n    address1: \"\",\n    address2: \"\",\n    zipcode: \"\",\n    city: \"\",\n    state: \"\",\n    email: \"\",\n    password: \"\",\n    passwordConfirmation: \"\",\n    errors: [],\n    loading: false,\n    usersRef: firebase.database().ref(\"users\")\n  };\n\n  isFormValid = () => {\n    let errors = [];\n    let error;\n\n    if (this.isFormEmpty(this.state)) {\n      error = { message: \"Fill in all fields\" };\n      this.setState({ errors: errors.concat(error) });\n      return false;\n    } else if (!this.isPasswordValid(this.state)) {\n      error = { message: \"Password is invalid\" };\n      this.setState({ errors: errors.concat(error) });\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  isFormEmpty = ({ username, storeName, email, password, passwordConfirmation }) => {\n    return (\n      !username.length ||\n      !storeName.length ||\n      !email.length ||\n      !password.length ||\n      !passwordConfirmation.length\n    );\n  };\n\n  isPasswordValid = ({ password, passwordConfirmation }) => {\n    if (password.length < 6 || passwordConfirmation.length < 6) {\n      return false;\n    } else if (password !== passwordConfirmation) {\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  displayErrors = errors =>\n    errors.map((error, i) => <p key={i}>{error.message}</p>);\n\n  handleChange = event => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    if (this.isFormValid()) {\n      this.setState({ errors: [], loading: true });\n\n      const {\n        storeName,\n        openHour,\n        closeHour,\n        address1,\n        address2,\n        zipcode,\n        city,\n        state,\n      } = this.state;\n\n      firebase\n        .auth()\n        .createUserWithEmailAndPassword(this.state.email, this.state.password)\n        .then(createdUser => {\n          console.log(createdUser);\n          createdUser.user\n            .updateProfile({\n              displayName: this.state.username,\n              photoURL: `http://gravatar.com/avatar/${md5(\n                createdUser.user.email\n              )}?d=identicon`\n            })\n            .then(() => {\n              this.saveUser({\n                createdUser, \n                storeName,\n                openHour,\n                closeHour,\n                address1,\n                address2,\n                zipcode,\n                city,\n                state,\n              }).then(() => {\n                console.log(\"user saved\");\n              });\n            })\n            .catch(err => {\n              console.error(err);\n              this.setState({\n                errors: this.state.errors.concat(err),\n                loading: false\n              });\n            });\n        })\n        .catch(err => {\n          console.error(err);\n          this.setState({\n            errors: this.state.errors.concat(err),\n            loading: false\n          });\n        });\n    }\n  };\n\n  saveUser = ({createdUser, \n    storeName,\n    openHour,\n    closeHour,\n    address1,\n    address2,\n    zipcode,\n    city,\n    state,\n  }) => {\n    return this.state.usersRef.child(createdUser.user.uid).set({\n      name: createdUser.user.displayName,\n      avatar: createdUser.user.photoURL,\n      storeName,\n      openHour,\n      closeHour,\n      address1,\n      address2,\n      zipcode,\n      city,\n      state,\n\n    });\n  };\n\n  handleInputError = (errors, inputName) => {\n    return errors.some(error => error.message.toLowerCase().includes(inputName))\n      ? \"error\"\n      : \"\";\n  };\n\n  render() {\n    const {\n      username,\n      storeName,\n      openHour,\n      closeHour,\n      address1,\n      address2,\n      zipcode,\n      city,\n      state,\n      email,\n      password,\n      passwordConfirmation,\n      errors,\n      loading\n    } = this.state;\n\n    return (\n      <Grid textAlign=\"center\" verticalAlign=\"middle\" className=\"app\">\n        <Grid.Column style={{ maxWidth: 450 }}>\n          <Header as=\"h1\" icon color=\"orange\" textAlign=\"center\">\n            <Icon name=\"add user\" color=\"orange\" />\n            Register for IVRobot\n          </Header>\n          <Form onSubmit={this.handleSubmit} size=\"large\">\n            <Segment stacked>\n              <Form.Input\n                fluid\n                name=\"username\"\n                icon=\"user\"\n                iconPosition=\"left\"\n                placeholder=\"Username\"\n                onChange={this.handleChange}\n                value={username}\n                type=\"text\"\n              />\n\n<Form.Input\n                fluid\n                name=\"storeName\"\n                icon=\"warehouse\"\n                iconPosition=\"left\"\n                placeholder=\"Store Name\"\n                onChange={this.handleChange}\n                value={storeName}\n                type=\"text\"\n              />\n\n              <Form.Input\n                fluid\n                name=\"email\"\n                icon=\"mail\"\n                iconPosition=\"left\"\n                placeholder=\"Email Address\"\n                onChange={this.handleChange}\n                value={email}\n                className={this.handleInputError(errors, \"email\")}\n                type=\"email\"\n              />\n\n              <Form.Input\n                fluid\n                name=\"password\"\n                icon=\"lock\"\n                iconPosition=\"left\"\n                placeholder=\"Password\"\n                onChange={this.handleChange}\n                value={password}\n                className={this.handleInputError(errors, \"password\")}\n                type=\"password\"\n              />\n\n              <Form.Input\n                fluid\n                name=\"passwordConfirmation\"\n                icon=\"repeat\"\n                iconPosition=\"left\"\n                placeholder=\"Password Confirmation\"\n                onChange={this.handleChange}\n                value={passwordConfirmation}\n                className={this.handleInputError(errors, \"password\")}\n                type=\"password\"\n              />\n\n\n<Form.Input\n                fluid\n                name=\"openHour\"\n                icon=\"clock outline\"\n                iconPosition=\"left\"\n                placeholder=\"Open Hour\"\n                onChange={this.handleChange}\n                value={openHour}\n                type=\"text\"\n              />\n\n<Form.Input\n                fluid\n                name=\"closeHour\"\n                icon=\"clock outline\"\n                iconPosition=\"left\"\n                placeholder=\"Close Hour\"\n                onChange={this.handleChange}\n                value={closeHour}\n                type=\"text\"\n              />\n\n<Form.Input\n                fluid\n                name=\"address1\"\n                icon=\"address book outline\"\n                iconPosition=\"left\"\n                placeholder=\"Address1\"\n                onChange={this.handleChange}\n                value={address1}\n                type=\"text\"\n              />\n\n<Form.Input\n                fluid\n                name=\"address2\"\n                icon=\"address book outline\"\n                iconPosition=\"left\"\n                placeholder=\"Address2\"\n                onChange={this.handleChange}\n                value={address2}\n                type=\"text\"\n              />\n\n<Form.Input\n                fluid\n                name=\"city\"\n\n                placeholder=\"City\"\n                onChange={this.handleChange}\n                value={city}\n                type=\"text\"\n              />\n\n<Form.Input\n                fluid\n                name=\"state\"\n                placeholder=\"State\"\n                onChange={this.handleChange}\n                value={state}\n                type=\"text\"\n              />\n\n<Form.Input\n                fluid\n                name=\"zipcode\"\n                placeholder=\"Zip Code\"\n                onChange={this.handleChange}\n                value={zipcode}\n                type=\"text\"\n              />\n\n              <Button\n                disabled={loading}\n                className={loading ? \"loading\" : \"\"}\n                color=\"orange\"\n                fluid\n                size=\"large\"\n              >\n                Submit\n              </Button>\n            </Segment>\n          </Form>\n          {errors.length > 0 && (\n            <Message error>\n              <h3>Error</h3>\n              {this.displayErrors(errors)}\n            </Message>\n          )}\n          <Message>\n            Already a user? <Link to=\"/login\">Login</Link>\n          </Message>\n        </Grid.Column>\n      </Grid>\n    );\n  }\n}\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}