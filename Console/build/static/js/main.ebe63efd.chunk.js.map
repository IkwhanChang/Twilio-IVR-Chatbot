{"version":3,"sources":["firebase.js","actions/types.js","actions/index.js","components/ColorPanel/ColorPanel.js","components/SidePanel/UserPanel.js","components/SidePanel/Channels.js","components/SidePanel/DirectMessages.js","components/SidePanel/Starred.js","components/SidePanel/SidePanel.js","components/Messages/MessagesHeader.js","components/Messages/FileModal.js","components/Messages/ProgressBar.js","components/Messages/MessageForm.js","components/Messages/Message.js","components/Messages/Typing.js","components/Messages/Skeleton.js","components/Messages/Messages.js","components/MetaPanel/MetaPanel.js","components/App.js","components/Auth/Login.js","components/Auth/Register.js","Spinner.js","registerServiceWorker.js","reducers/index.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","SET_USER","CLEAR_USER","SET_CURRENT_CHANNEL","SET_PRIVATE_CHANNEL","SET_USER_POSTS","SET_COLORS","setCurrentChannel","channel","type","actionTypes","payload","currentChannel","setPrivateChannel","isPrivateChannel","ColorPanel","state","modal","primary","secondary","user","props","currentUser","usersRef","database","ref","userColors","removeListener","child","uid","off","addListener","userId","on","snap","unshift","val","setState","handleChangePrimary","color","hex","handleChangeSecondary","handleSaveColors","saveColors","push","update","then","console","log","closeModal","catch","err","error","displayUserColors","colors","length","map","i","Fragment","Divider","className","onClick","setColors","style","background","openModal","this","Sidebar","as","Menu","icon","inverted","vertical","visible","width","Button","size","Modal","basic","open","onClose","Header","Content","Segment","Label","content","onChange","Actions","Icon","name","React","Component","connect","primaryColor","secondaryColor","UserPanel","storeName","previewImage","croppedImage","blob","uploadedCroppedImage","storageRef","storage","userRef","auth","metadata","contentType","dropdownOptions","key","text","displayName","disabled","handleSignout","uploadCroppedImage","put","getDownloadURL","downloadURL","changeAvatar","updateProfile","photoURL","avatar","handleChange","event","file","target","files","reader","FileReader","readAsDataURL","addEventListener","result","handleCropImage","avatarEditor","getImageScaledToCanvas","toBlob","imageUrl","URL","createObjectURL","signOut","once","snapshot","twilioNumber","items","promotions","Grid","Column","Row","padding","margin","floated","idx","stock","Dropdown","trigger","Image","src","spaced","options","Input","fluid","label","centered","stackable","columns","node","image","height","border","scale","Channels","activeChannel","channels","channelName","channelDetails","channelsRef","messagesRef","typingRef","notifications","firstLoad","addListeners","loadedChannels","id","setFirstChannel","addNotificationListener","channelId","handleNotifications","currentChannelId","lastTotal","index","findIndex","notification","total","numChildren","count","lastKnownTotal","removeListeners","forEach","firstChannel","setActiveChannel","addChannel","newChannel","details","createdBy","handleSubmit","preventDefault","isFormValid","value","changeChannel","remove","clearNotifications","updatedNotifications","getNotificationCount","displayChannels","Item","opacity","active","Form","onSubmit","Field","DirectMessages","users","connectedRef","presenceRef","currentUserUid","loadedUsers","set","onDisconnect","addStatusToUser","connected","updatedUsers","reduce","acc","concat","isUserOnline","status","channelData","getChannelId","currentUserId","fontStyle","Starred","starredChannels","starredChannel","channelToRemove","filteredChannels","filter","SidePanel","fixed","fontSize","MessagesHeader","numUniqueUsers","handleSearchChange","searchLoading","handleStar","isChannelStarred","clearing","marginBottom","FileModal","authorized","addFile","sendFile","uploadFile","isAuthorized","mime","lookup","clearFile","filename","includes","ProgressBar","uploadState","percentUploaded","Progress","percent","progress","indicating","MessageForm","uploadTask","message","loading","errors","emojiPicker","handleKeyDown","ctrlKey","keyCode","sendMessage","handleTogglePicker","handleAddEmoji","emoji","oldMessage","newMessage","colonToUnicode","colons","setTimeout","messageInputRef","focus","replace","x","emojiIndex","emojis","unicode","native","createMessage","fileUrl","timestamp","ServerValue","TIMESTAMP","senderName","getMessagesRef","getPath","pathToUpload","filePath","uuidv4","Math","round","bytesTransferred","totalBytes","downloadUrl","sendFileMessage","cancel","onSelect","title","onKeyDown","labelPosition","some","placeholder","Group","widths","isOwnMessage","isImage","hasOwnProperty","Message","Comment","Avatar","Author","Metadata","moment","fromNow","Text","Typing","Skeleton","Messages","privateChannel","privateMessagesRef","messages","messagesLoading","searchTerm","searchResults","typingUsers","listeners","listener","addToListeners","newListener","scrollToBottom","messagesEnd","scrollIntoView","behavior","addMessageListener","addTypingListeners","loadedMessages","countUniqueUsers","countUserPosts","addUserStarsListener","data","prevStarred","Object","keys","prevState","starChannel","handleSearchMessages","channelMessages","regex","RegExp","match","uniqueUsers","plural","userPosts","setUserPosts","displayMessages","displayChannelName","displayTypingUsers","display","alignItems","displayMessageSkeleton","Array","_","prevProps","MetaPanel","activeIndex","setActiveIndex","titleProps","newIndex","formatCount","num","displayTopPosters","posts","entries","sort","a","b","List","Description","slice","marginLeft","verticalAlign","maxWidth","Login","email","password","displayErrors","signInWithEmailAndPassword","signedInUser","handleInputError","inputName","toLowerCase","textAlign","stacked","iconPosition","Link","to","Register","username","openHour","closeHour","address1","address2","zipcode","city","passwordConfirmation","isFormEmpty","isPasswordValid","createUserWithEmailAndPassword","createdUser","md5","saveUser","Spinner","Dimmer","Loader","isLocalhost","Boolean","window","location","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","initialUserState","isLoading","initialChannelState","initialColorsState","rootReducer","combineReducers","action","store","createStore","composeWithDevTools","Root","onAuthStateChanged","setUser","history","clearUser","Switch","Route","exact","path","component","App","RootWithAuth","withRouter","ReactDOM","render","document","getElementById","process","origin","fetch","response","headers","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.ebe63efd.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/database\";\nimport \"firebase/storage\";\n\n\nvar config = {\n  // apiKey: \"AIzaSyDy7le4Y68RTetpOiX2bYO6CvCp7IKBf5Y\",\n  // authDomain: \"react-slack-clone-bfb54.firebaseapp.com\",\n  // databaseURL: \"https://react-slack-clone-bfb54.firebaseio.com\",\n  // projectId: \"react-slack-clone-bfb54\",\n  // storageBucket: \"react-slack-clone-bfb54.appspot.com\",\n  // messagingSenderId: \"645952099075\"\n  apiKey: \"AIzaSyBPYmZJbVMjXr4xpV837uZ888M8kT7KdxQ\",\n    authDomain: \"ivrobot-19973.firebaseapp.com\",\n    databaseURL: \"https://ivrobot-19973.firebaseio.com\",\n    projectId: \"ivrobot-19973\",\n    storageBucket: \"ivrobot-19973.appspot.com\",\n    messagingSenderId: \"173346576382\",\n    appId: \"1:173346576382:web:155e5dd71d80216cded2af\",\n    measurementId: \"G-4SMTHLF91M\"\n};\nfirebase.initializeApp(config);\n\nexport default firebase;","/* User Action Types */\nexport const SET_USER = \"SET_USER\";\nexport const CLEAR_USER = \"CLEAR_USER\";\n\n/* Channel Action Types */\nexport const SET_CURRENT_CHANNEL = \"SET_CURRENT_CHANNEL\";\nexport const SET_PRIVATE_CHANNEL = \"SET_PRIVATE_CHANNEL\";\nexport const SET_USER_POSTS = \"SET_USER_POSTS\";\n\n/* Colors Action Types */\nexport const SET_COLORS = \"SET_COLORS\";\n","import * as actionTypes from \"./types\";\n\n/* User Actions */\nexport const setUser = user => {\n  return {\n    type: actionTypes.SET_USER,\n    payload: {\n      currentUser: user\n    }\n  };\n};\n\nexport const clearUser = () => {\n  return {\n    type: actionTypes.CLEAR_USER\n  };\n};\n\n/* Channel Actions */\nexport const setCurrentChannel = channel => {\n  return {\n    type: actionTypes.SET_CURRENT_CHANNEL,\n    payload: {\n      currentChannel: channel\n    }\n  };\n};\n\nexport const setPrivateChannel = isPrivateChannel => {\n  return {\n    type: actionTypes.SET_PRIVATE_CHANNEL,\n    payload: {\n      isPrivateChannel\n    }\n  };\n};\n\nexport const setUserPosts = userPosts => {\n  return {\n    type: actionTypes.SET_USER_POSTS,\n    payload: {\n      userPosts\n    }\n  };\n};\n\n/* Colors Actions */\nexport const setColors = (primaryColor, secondaryColor) => {\n  return {\n    type: actionTypes.SET_COLORS,\n    payload: {\n      primaryColor,\n      secondaryColor\n    }\n  };\n};\n","import React from \"react\";\nimport firebase from \"../../firebase\";\nimport { connect } from \"react-redux\";\nimport { setColors } from \"../../actions\";\n// prettier-ignore\nimport { Sidebar, Menu, Divider, Button, Modal, Icon, Label, Segment } from \"semantic-ui-react\";\nimport { SliderPicker } from \"react-color\";\n\nclass ColorPanel extends React.Component {\n  state = {\n    modal: false,\n    primary: \"\",\n    secondary: \"\",\n    user: this.props.currentUser,\n    usersRef: firebase.database().ref(\"users\"),\n    userColors: []\n  };\n\n  componentDidMount() {\n    if (this.state.user) {\n      this.addListener(this.state.user.uid);\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeListener();\n  }\n\n  removeListener = () => {\n    this.state.usersRef.child(`${this.state.user.uid}/colors`).off();\n  };\n\n  addListener = userId => {\n    let userColors = [];\n    this.state.usersRef.child(`${userId}/colors`).on(\"child_added\", snap => {\n      userColors.unshift(snap.val());\n      this.setState({ userColors });\n    });\n  };\n\n  handleChangePrimary = color => this.setState({ primary: color.hex });\n\n  handleChangeSecondary = color => this.setState({ secondary: color.hex });\n\n  handleSaveColors = () => {\n    if (this.state.primary && this.state.secondary) {\n      this.saveColors(this.state.primary, this.state.secondary);\n    }\n  };\n\n  saveColors = (primary, secondary) => {\n    this.state.usersRef\n      .child(`${this.state.user.uid}/colors`)\n      .push()\n      .update({\n        primary,\n        secondary\n      })\n      .then(() => {\n        console.log(\"Colors added\");\n        this.closeModal();\n      })\n      .catch(err => console.error(err));\n  };\n\n  displayUserColors = colors =>\n    colors.length > 0 &&\n    colors.map((color, i) => (\n      <React.Fragment key={i}>\n        <Divider />\n        <div\n          className=\"color__container\"\n          onClick={() => this.props.setColors(color.primary, color.secondary)}\n        >\n          <div className=\"color__square\" style={{ background: color.primary }}>\n            <div\n              className=\"color__overlay\"\n              style={{ background: color.secondary }}\n            />\n          </div>\n        </div>\n      </React.Fragment>\n    ));\n\n  openModal = () => this.setState({ modal: true });\n\n  closeModal = () => this.setState({ modal: false });\n\n  render() {\n    const { modal, primary, secondary, userColors } = this.state;\n\n    return (\n      <Sidebar\n        as={Menu}\n        icon=\"labeled\"\n        inverted\n        vertical\n        visible\n        width=\"very thin\"\n      >\n        <Divider />\n        <Button icon=\"add\" size=\"small\" color=\"blue\" onClick={this.openModal} />\n        {this.displayUserColors(userColors)}\n\n        {/* Color Picker Modal */}\n        <Modal basic open={modal} onClose={this.closeModal}>\n          <Modal.Header>Choose App Colors</Modal.Header>\n          <Modal.Content>\n            <Segment inverted>\n              <Label content=\"Primary Color\" />\n              <SliderPicker\n                color={primary}\n                onChange={this.handleChangePrimary}\n              />\n            </Segment>\n\n            <Segment inverted>\n              <Label content=\"Secondary Color\" />\n              <SliderPicker\n                color={secondary}\n                onChange={this.handleChangeSecondary}\n              />\n            </Segment>\n          </Modal.Content>\n          <Modal.Actions>\n            <Button color=\"green\" inverted onClick={this.handleSaveColors}>\n              <Icon name=\"checkmark\" /> Save Colors\n            </Button>\n            <Button color=\"red\" inverted onClick={this.closeModal}>\n              <Icon name=\"remove\" /> Cancel\n            </Button>\n          </Modal.Actions>\n        </Modal>\n      </Sidebar>\n    );\n  }\n}\n\nexport default connect(\n  null,\n  { setColors }\n)(ColorPanel);\n","import React from \"react\";\nimport firebase from \"../../firebase\";\nimport AvatarEditor from \"react-avatar-editor\";\n// prettier-ignore\nimport { Grid, Header, Icon, Dropdown, Image, Modal, Input, Button } from \"semantic-ui-react\";\n\nclass UserPanel extends React.Component {\n  state = {\n    user: this.props.currentUser,\n    storeName: \"\",\n    modal: false,\n    previewImage: \"\",\n    croppedImage: \"\",\n    blob: null,\n    uploadedCroppedImage: \"\",\n    storageRef: firebase.storage().ref(),\n    userRef: firebase.auth().currentUser,\n    usersRef: firebase.database().ref(\"users\"),\n    metadata: {\n      contentType: \"image/jpeg\"\n    }\n  };\n\n  openModal = () => this.setState({ modal: true });\n\n  closeModal = () => this.setState({ modal: false });\n\n  dropdownOptions = () => [\n    {\n      key: \"user\",\n      text: (\n        <span>\n          Signed in as <strong>{this.state.user.displayName}</strong>\n        </span>\n      ),\n      disabled: true\n    },\n    {\n      key: \"avatar\",\n      text: <span onClick={this.openModal}>Change Avatar</span>\n    },\n    {\n      key: \"signout\",\n      text: <span onClick={this.handleSignout}>Sign Out</span>\n    }\n  ];\n\n  uploadCroppedImage = () => {\n    const { storageRef, userRef, blob, metadata } = this.state;\n\n    storageRef\n      .child(`avatars/users/${userRef.uid}`)\n      .put(blob, metadata)\n      .then(snap => {\n        snap.ref.getDownloadURL().then(downloadURL => {\n          this.setState({ uploadedCroppedImage: downloadURL }, () =>\n            this.changeAvatar()\n          );\n        });\n      });\n  };\n\n  changeAvatar = () => {\n    this.state.userRef\n      .updateProfile({\n        photoURL: this.state.uploadedCroppedImage\n      })\n      .then(() => {\n        console.log(\"PhotoURL updated\");\n        this.closeModal();\n      })\n      .catch(err => {\n        console.error(err);\n      });\n\n    this.state.usersRef\n      .child(this.state.user.uid)\n      .update({ avatar: this.state.uploadedCroppedImage })\n      .then(() => {\n        console.log(\"User avatar updated\");\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  };\n\n  handleChange = event => {\n    const file = event.target.files[0];\n    const reader = new FileReader();\n\n    if (file) {\n      reader.readAsDataURL(file);\n      reader.addEventListener(\"load\", () => {\n        this.setState({ previewImage: reader.result });\n      });\n    }\n  };\n\n  handleCropImage = () => {\n    if (this.avatarEditor) {\n      this.avatarEditor.getImageScaledToCanvas().toBlob(blob => {\n        let imageUrl = URL.createObjectURL(blob);\n        this.setState({\n          croppedImage: imageUrl,\n          blob\n        });\n      });\n    }\n  };\n\n  handleSignout = () => {\n    firebase\n      .auth()\n      .signOut()\n      .then(() => console.log(\"signed out!\"));\n  };\n\n  componentDidMount(){\n    this.state.usersRef.child(this.props.currentUser.uid).once('value').then(snapshot => {\n      this.setState({\n        storeName: snapshot.val() && snapshot.val().storeName || '',\n        twilioNumber: snapshot.val() && snapshot.val().twilioNumber || '',\n        items:  snapshot.val() && snapshot.val().items || [],\n        promotions:  snapshot.val() && snapshot.val().promotions || [],\n      })\n    })\n  }\n\n  render() {\n    const { storeName = [], items = [], promotions, twilioNumber, user, modal, previewImage, croppedImage } = this.state;\n    const { primaryColor } = this.props;\n\n    return (\n      <Grid style={{ background: primaryColor }}>\n        <Grid.Column>\n          <Grid.Row style={{ padding: \"1.2em\", margin: 0 }}>\n            {/* App Header */}\n            <Header inverted floated=\"left\" as=\"h2\">\n              <Icon name=\"headphones\" />\n              <Header.Content>IVRobot</Header.Content>\n              \n            </Header>\n            <Header inverted floated=\"left\" as=\"h3\">\n              {storeName}\n            </Header>\n            <Header inverted floated=\"left\" as=\"h6\">\n              Phone Number: {twilioNumber}<br/>\n            </Header>\n\n            <Header inverted floated=\"left\" as=\"h6\">\n              Items:<br/>\n              {items.map((i, idx) => <p key={idx}>{i.name}({i.stock})</p>)}\n            </Header>\n\n            {/* User Dropdown  */}\n            <Header style={{ padding: \"0.25em\" }} as=\"h4\" inverted>\n              <Dropdown\n                trigger={\n                  <span>\n                    <Image src={user.photoURL} spaced=\"right\" avatar />\n                    {user.displayName}\n                  </span>\n                }\n                options={this.dropdownOptions()}\n              />\n            </Header>\n          </Grid.Row>\n\n          {/* Change User Avatar Modal   */}\n          <Modal basic open={modal} onClose={this.closeModal}>\n            <Modal.Header>Change Avatar</Modal.Header>\n            <Modal.Content>\n              <Input\n                onChange={this.handleChange}\n                fluid\n                type=\"file\"\n                label=\"New Avatar\"\n                name=\"previewImage\"\n              />\n              <Grid centered stackable columns={2}>\n                <Grid.Row centered>\n                  <Grid.Column className=\"ui center aligned grid\">\n                    {previewImage && (\n                      <AvatarEditor\n                        ref={node => (this.avatarEditor = node)}\n                        image={previewImage}\n                        width={120}\n                        height={120}\n                        border={50}\n                        scale={1.2}\n                      />\n                    )}\n                  </Grid.Column>\n                  <Grid.Column>\n                    {croppedImage && (\n                      <Image\n                        style={{ margin: \"3.5em auto\" }}\n                        width={100}\n                        height={100}\n                        src={croppedImage}\n                      />\n                    )}\n                  </Grid.Column>\n                </Grid.Row>\n              </Grid>\n            </Modal.Content>\n            <Modal.Actions>\n              {croppedImage && (\n                <Button\n                  color=\"green\"\n                  inverted\n                  onClick={this.uploadCroppedImage}\n                >\n                  <Icon name=\"save\" /> Change Avatar\n                </Button>\n              )}\n              <Button color=\"green\" inverted onClick={this.handleCropImage}>\n                <Icon name=\"image\" /> Preview\n              </Button>\n              <Button color=\"red\" inverted onClick={this.closeModal}>\n                <Icon name=\"remove\" /> Cancel\n              </Button>\n            </Modal.Actions>\n          </Modal>\n        </Grid.Column>\n      </Grid>\n    );\n  }\n}\n\nexport default UserPanel;\n","import React from \"react\";\nimport firebase from \"../../firebase\";\nimport { connect } from \"react-redux\";\nimport { setCurrentChannel, setPrivateChannel } from \"../../actions\";\n// prettier-ignore\nimport { Menu, Icon, Modal, Form, Input, Button, Label } from \"semantic-ui-react\";\n\nclass Channels extends React.Component {\n  state = {\n    activeChannel: \"\",\n    user: this.props.currentUser,\n    channel: null,\n    channels: [],\n    channelName: \"\",\n    channelDetails: \"\",\n    channelsRef: firebase.database().ref(\"customers\").child(this.props.currentUser.uid),\n    messagesRef: firebase.database().ref(\"messages\"),\n    typingRef: firebase.database().ref(\"typing\"),\n    notifications: [],\n    modal: false,\n    firstLoad: true\n  };\n\n  componentDidMount() {\n    this.addListeners();\n  }\n\n  componentWillUnmount() {\n    this.removeListeners();\n  }\n\n  addListeners = () => {\n    let loadedChannels = [];\n    this.state.channelsRef.on(\"child_added\", snap => {\n      loadedChannels.push({...snap.val(), id: snap.key});\n      this.setState({ channels: loadedChannels }, () => this.setFirstChannel());\n      this.addNotificationListener(snap.key);\n    });\n  };\n\n  addNotificationListener = channelId => {\n    this.state.messagesRef.child(channelId).on(\"value\", snap => {\n      if (this.state.channel) {\n        this.handleNotifications(\n          channelId,\n          this.state.channel.id,\n          this.state.notifications,\n          snap\n        );\n      }\n    });\n  };\n\n  handleNotifications = (channelId, currentChannelId, notifications, snap) => {\n    let lastTotal = 0;\n\n    let index = notifications.findIndex(\n      notification => notification.id === channelId\n    );\n\n    if (index !== -1) {\n      if (channelId !== currentChannelId) {\n        lastTotal = notifications[index].total;\n\n        if (snap.numChildren() - lastTotal > 0) {\n          notifications[index].count = snap.numChildren() - lastTotal;\n        }\n      }\n      notifications[index].lastKnownTotal = snap.numChildren();\n    } else {\n      notifications.push({\n        id: channelId,\n        total: snap.numChildren(),\n        lastKnownTotal: snap.numChildren(),\n        count: 0\n      });\n    }\n\n    this.setState({ notifications });\n  };\n\n  removeListeners = () => {\n    this.state.channelsRef.off();\n    this.state.channels.forEach(channel => {\n      this.state.messagesRef.child(channel.id).off();\n    });\n  };\n\n  setFirstChannel = () => {\n    const firstChannel = this.state.channels[0];\n    if (this.state.firstLoad && this.state.channels.length > 0) {\n      this.props.setCurrentChannel(firstChannel);\n      this.setActiveChannel(firstChannel);\n      this.setState({ channel: firstChannel });\n    }\n    this.setState({ firstLoad: false });\n  };\n\n  addChannel = () => {\n    const { channelsRef, channelName, channelDetails, user } = this.state;\n\n    const key = channelsRef.push().key;\n\n    const newChannel = {\n      id: key,\n      name: channelName,\n      details: channelDetails,\n      createdBy: {\n        name: user.displayName,\n        avatar: user.photoURL\n      }\n    };\n\n    channelsRef\n      .child(key)\n      .update(newChannel)\n      .then(() => {\n        this.setState({ channelName: \"\", channelDetails: \"\" });\n        this.closeModal();\n        console.log(\"channel added\");\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    if (this.isFormValid(this.state)) {\n      this.addChannel();\n    }\n  };\n\n  handleChange = event => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  changeChannel = channel => {\n    this.setActiveChannel(channel);\n    this.state.typingRef\n      .child(this.state.channel.id)\n      .child(this.state.user.uid)\n      .remove();\n    this.clearNotifications();\n    this.props.setCurrentChannel(channel);\n    this.props.setPrivateChannel(false);\n    this.setState({ channel });\n  };\n\n  clearNotifications = () => {\n    let index = this.state.notifications.findIndex(\n      notification => notification.id === this.state.channel.id\n    );\n\n    if (index !== -1) {\n      let updatedNotifications = [...this.state.notifications];\n      updatedNotifications[index].total = this.state.notifications[\n        index\n      ].lastKnownTotal;\n      updatedNotifications[index].count = 0;\n      this.setState({ notifications: updatedNotifications });\n    }\n  };\n\n  setActiveChannel = channel => {\n    this.setState({ activeChannel: channel.id });\n  };\n\n  getNotificationCount = channel => {\n    let count = 0;\n\n    this.state.notifications.forEach(notification => {\n      if (notification.id === channel.id) {\n        count = notification.count;\n      }\n    });\n\n    if (count > 0) return count;\n  };\n\n  displayChannels = channels =>\n    channels.length > 0 &&\n    channels.map(channel => (\n      <Menu.Item\n        key={channel.id}\n        onClick={() => this.changeChannel(channel)}\n        name={channel.name}\n        style={{ opacity: 0.7 }}\n        active={channel.id === this.state.activeChannel}\n      >\n        {this.getNotificationCount(channel) && (\n          <Label color=\"red\">{this.getNotificationCount(channel)}</Label>\n        )}\n         {channel.name}\n      </Menu.Item>\n    ));\n\n  isFormValid = ({ channelName, channelDetails }) =>\n    channelName && channelDetails;\n\n  openModal = () => this.setState({ modal: true });\n\n  closeModal = () => this.setState({ modal: false });\n\n  render() {\n    const { channels, modal } = this.state;\n\n    return (\n      <React.Fragment>\n        <Menu.Menu className=\"menu\">\n          <Menu.Item>\n            <span>\n              <Icon name=\"address book\" /> CUSTOMERS\n            </span>{\" \"}\n            ({channels.length}) \n            {/* <Icon name=\"add\" onClick={this.openModal} /> */}\n          </Menu.Item>\n          {this.displayChannels(channels)}\n        </Menu.Menu>\n\n        {/* Add Channel Modal */}\n        <Modal basic open={modal} onClose={this.closeModal}>\n          <Modal.Header>Add a Channel</Modal.Header>\n          <Modal.Content>\n            <Form onSubmit={this.handleSubmit}>\n              <Form.Field>\n                <Input\n                  fluid\n                  label=\"Name of Channel\"\n                  name=\"channelName\"\n                  onChange={this.handleChange}\n                />\n              </Form.Field>\n\n              <Form.Field>\n                <Input\n                  fluid\n                  label=\"About the Channel\"\n                  name=\"channelDetails\"\n                  onChange={this.handleChange}\n                />\n              </Form.Field>\n            </Form>\n          </Modal.Content>\n\n          <Modal.Actions>\n            <Button color=\"green\" inverted onClick={this.handleSubmit}>\n              <Icon name=\"checkmark\" /> Add\n            </Button>\n            <Button color=\"red\" inverted onClick={this.closeModal}>\n              <Icon name=\"remove\" /> Cancel\n            </Button>\n          </Modal.Actions>\n        </Modal>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default connect(\n  null,\n  { setCurrentChannel, setPrivateChannel }\n)(Channels);\n","import React from \"react\";\nimport firebase from \"../../firebase\";\nimport { connect } from \"react-redux\";\nimport { setCurrentChannel, setPrivateChannel } from \"../../actions\";\nimport { Menu, Icon } from \"semantic-ui-react\";\n\nclass DirectMessages extends React.Component {\n  state = {\n    activeChannel: \"\",\n    user: this.props.currentUser,\n    users: [],\n    usersRef: firebase.database().ref(\"users\"),\n    connectedRef: firebase.database().ref(\".info/connected\"),\n    presenceRef: firebase.database().ref(\"presence\")\n  };\n\n  componentDidMount() {\n    if (this.state.user) {\n      this.addListeners(this.state.user.uid);\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeListeners();\n  }\n\n  removeListeners = () => {\n    this.state.usersRef.off();\n    this.state.presenceRef.off();\n    this.state.connectedRef.off();\n  };\n\n  addListeners = currentUserUid => {\n    let loadedUsers = [];\n    this.state.usersRef.on(\"child_added\", snap => {\n      if (currentUserUid !== snap.key) {\n        let user = snap.val();\n        user[\"uid\"] = snap.key;\n        user[\"status\"] = \"offline\";\n        loadedUsers.push(user);\n        this.setState({ users: loadedUsers });\n      }\n    });\n\n    this.state.connectedRef.on(\"value\", snap => {\n      if (snap.val() === true) {\n        const ref = this.state.presenceRef.child(currentUserUid);\n        ref.set(true);\n        ref.onDisconnect().remove(err => {\n          if (err !== null) {\n            console.error(err);\n          }\n        });\n      }\n    });\n\n    this.state.presenceRef.on(\"child_added\", snap => {\n      if (currentUserUid !== snap.key) {\n        this.addStatusToUser(snap.key);\n      }\n    });\n\n    this.state.presenceRef.on(\"child_removed\", snap => {\n      if (currentUserUid !== snap.key) {\n        this.addStatusToUser(snap.key, false);\n      }\n    });\n  };\n\n  addStatusToUser = (userId, connected = true) => {\n    const updatedUsers = this.state.users.reduce((acc, user) => {\n      if (user.uid === userId) {\n        user[\"status\"] = `${connected ? \"online\" : \"offline\"}`;\n      }\n      return acc.concat(user);\n    }, []);\n    this.setState({ users: updatedUsers });\n  };\n\n  isUserOnline = user => user.status === \"online\";\n\n  changeChannel = user => {\n    const channelId = this.getChannelId(user.uid);\n    const channelData = {\n      id: channelId,\n      name: user.name\n    };\n    this.props.setCurrentChannel(channelData);\n    this.props.setPrivateChannel(true);\n    this.setActiveChannel(user.uid);\n  };\n\n  getChannelId = userId => {\n    const currentUserId = this.state.user.uid;\n    return userId < currentUserId\n      ? `${userId}/${currentUserId}`\n      : `${currentUserId}/${userId}`;\n  };\n\n  setActiveChannel = userId => {\n    this.setState({ activeChannel: userId });\n  };\n\n  render() {\n    const { users, activeChannel } = this.state;\n\n    return (\n      <Menu.Menu className=\"menu\">\n        <Menu.Item>\n          <span>\n            <Icon name=\"mail\" /> Customers\n          </span>{\" \"}\n          ({users.length})\n        </Menu.Item>\n        {users.map(user => (\n          <Menu.Item\n            key={user.uid}\n            active={user.uid === activeChannel}\n            onClick={() => this.changeChannel(user)}\n            style={{ opacity: 0.7, fontStyle: \"italic\" }}\n          >\n            <Icon\n              name=\"circle\"\n              color={this.isUserOnline(user) ? \"green\" : \"red\"}\n            />\n            @ {user.name}\n          </Menu.Item>\n        ))}\n      </Menu.Menu>\n    );\n  }\n}\n\nexport default connect(\n  null,\n  { setCurrentChannel, setPrivateChannel }\n)(DirectMessages);\n","import React from \"react\";\nimport firebase from \"../../firebase\";\nimport { connect } from \"react-redux\";\nimport { setCurrentChannel, setPrivateChannel } from \"../../actions\";\nimport { Menu, Icon } from \"semantic-ui-react\";\n\nclass Starred extends React.Component {\n  state = {\n    user: this.props.currentUser,\n    usersRef: firebase.database().ref(\"users\"),\n    activeChannel: \"\",\n    starredChannels: []\n  };\n\n  componentDidMount() {\n    if (this.state.user) {\n      this.addListeners(this.state.user.uid);\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeListener();\n  }\n\n  removeListener = () => {\n    this.state.usersRef.child(`${this.state.user.uid}/starred`).off();\n  };\n\n  addListeners = userId => {\n    this.state.usersRef\n      .child(userId)\n      .child(\"starred\")\n      .on(\"child_added\", snap => {\n        const starredChannel = { id: snap.key, ...snap.val() };\n        this.setState({\n          starredChannels: [...this.state.starredChannels, starredChannel]\n        });\n      });\n\n    this.state.usersRef\n      .child(userId)\n      .child(\"starred\")\n      .on(\"child_removed\", snap => {\n        const channelToRemove = { id: snap.key, ...snap.val() };\n        const filteredChannels = this.state.starredChannels.filter(channel => {\n          return channel.id !== channelToRemove.id;\n        });\n        this.setState({ starredChannels: filteredChannels });\n      });\n  };\n\n  setActiveChannel = channel => {\n    this.setState({ activeChannel: channel.id });\n  };\n\n  changeChannel = channel => {\n    this.setActiveChannel(channel);\n    this.props.setCurrentChannel(channel);\n    this.props.setPrivateChannel(false);\n  };\n\n  displayChannels = starredChannels =>\n    starredChannels.length > 0 &&\n    starredChannels.map(channel => (\n      <Menu.Item\n        key={channel.id}\n        onClick={() => this.changeChannel(channel)}\n        name={channel.name}\n        style={{ opacity: 0.7 }}\n        active={channel.id === this.state.activeChannel}\n      >\n        # {channel.name}\n      </Menu.Item>\n    ));\n\n  render() {\n    const { starredChannels } = this.state;\n\n    return (\n      <Menu.Menu className=\"menu\">\n        <Menu.Item>\n          <span>\n            <Icon name=\"star\" /> STARRED\n          </span>{\" \"}\n          ({starredChannels.length})\n        </Menu.Item>\n        {this.displayChannels(starredChannels)}\n      </Menu.Menu>\n    );\n  }\n}\n\nexport default connect(\n  null,\n  { setCurrentChannel, setPrivateChannel }\n)(Starred);\n","import React from \"react\";\nimport { Menu } from \"semantic-ui-react\";\n\nimport UserPanel from \"./UserPanel\";\nimport Channels from \"./Channels\";\nimport DirectMessages from \"./DirectMessages\";\nimport Starred from \"./Starred\";\n\nclass SidePanel extends React.Component {\n  render() {\n    const { currentUser, primaryColor } = this.props;\n\n    return (\n      <Menu\n        size=\"large\"\n        inverted\n        fixed=\"left\"\n        vertical\n        style={{ background: primaryColor, fontSize: \"1.2rem\" }}\n      >\n        <UserPanel primaryColor={primaryColor} currentUser={currentUser} />\n        {/* <Starred currentUser={currentUser} /> */}\n        <Channels currentUser={currentUser} />\n        {/* <DirectMessages currentUser={currentUser} /> */}\n      </Menu>\n    );\n  }\n}\n\nexport default SidePanel;\n","import React from \"react\";\nimport { Header, Segment, Input, Icon } from \"semantic-ui-react\";\n\nclass MessagesHeader extends React.Component {\n  render() {\n    const {\n      channelName,\n      numUniqueUsers,\n      handleSearchChange,\n      searchLoading,\n      isPrivateChannel,\n      handleStar,\n      isChannelStarred\n    } = this.props;\n\n    return (\n      <Segment clearing>\n        {/* Channel Title */}\n        <Header fluid=\"true\" as=\"h2\" floated=\"left\" style={{ marginBottom: 0 }}>\n          <span>\n            {channelName}\n            {/* {!isPrivateChannel && (\n              <Icon\n                onClick={handleStar}\n                name={isChannelStarred ? \"star\" : \"star outline\"}\n                color={isChannelStarred ? \"yellow\" : \"black\"}\n              />\n            )} */}\n          </span>\n          {/* <Header.Subheader>{numUniqueUsers}</Header.Subheader> */}\n        </Header>\n\n        {/* Channel Search Input */}\n        {/* <Header floated=\"right\">\n          <Input\n            loading={searchLoading}\n            onChange={handleSearchChange}\n            size=\"mini\"\n            icon=\"search\"\n            name=\"searchTerm\"\n            placeholder=\"Search Messages\"\n          />\n        </Header> */}\n      </Segment>\n    );\n  }\n}\n\nexport default MessagesHeader;\n","import React from \"react\";\nimport mime from \"mime-types\";\nimport { Modal, Input, Button, Icon } from \"semantic-ui-react\";\n\nclass FileModal extends React.Component {\n  state = {\n    file: null,\n    authorized: [\"image/jpeg\", \"image/png\"]\n  };\n\n  addFile = event => {\n    const file = event.target.files[0];\n    if (file) {\n      this.setState({ file });\n    }\n  };\n\n  sendFile = () => {\n    const { file } = this.state;\n    const { uploadFile, closeModal } = this.props;\n\n    if (file !== null) {\n      if (this.isAuthorized(file.name)) {\n        const metadata = { contentType: mime.lookup(file.name) };\n        uploadFile(file, metadata);\n        closeModal();\n        this.clearFile();\n      }\n    }\n  };\n\n  isAuthorized = filename =>\n    this.state.authorized.includes(mime.lookup(filename));\n\n  clearFile = () => this.setState({ file: null });\n\n  render() {\n    const { modal, closeModal } = this.props;\n\n    return (\n      <Modal basic open={modal} onClose={closeModal}>\n        <Modal.Header>Select an Image File</Modal.Header>\n        <Modal.Content>\n          <Input\n            onChange={this.addFile}\n            fluid\n            label=\"File types: jpg, png\"\n            name=\"file\"\n            type=\"file\"\n          />\n        </Modal.Content>\n        <Modal.Actions>\n          <Button onClick={this.sendFile} color=\"green\" inverted>\n            <Icon name=\"checkmark\" /> Send\n          </Button>\n          <Button color=\"red\" inverted onClick={closeModal}>\n            <Icon name=\"remove\" /> Cancel\n          </Button>\n        </Modal.Actions>\n      </Modal>\n    );\n  }\n}\n\nexport default FileModal;\n","import React from \"react\";\nimport { Progress } from \"semantic-ui-react\";\n\nconst ProgressBar = ({ uploadState, percentUploaded }) =>\n  uploadState === \"uploading\" && (\n    <Progress\n      className=\"progress__bar\"\n      percent={percentUploaded}\n      progress\n      indicating\n      size=\"medium\"\n      inverted\n    />\n  );\n\nexport default ProgressBar;\n","import React from \"react\";\nimport uuidv4 from \"uuid/v4\";\nimport firebase from \"../../firebase\";\nimport { Segment, Button, Input } from \"semantic-ui-react\";\nimport { Picker, emojiIndex } from \"emoji-mart\";\nimport \"emoji-mart/css/emoji-mart.css\";\n\nimport FileModal from \"./FileModal\";\nimport ProgressBar from \"./ProgressBar\";\n\nclass MessageForm extends React.Component {\n  state = {\n    storageRef: firebase.storage().ref(),\n    typingRef: firebase.database().ref(\"typing\"),\n    uploadTask: null,\n    uploadState: \"\",\n    percentUploaded: 0,\n    message: \"\",\n    channel: this.props.currentChannel,\n    user: this.props.currentUser,\n    loading: false,\n    errors: [],\n    modal: false,\n    emojiPicker: false\n  };\n\n  componentWillUnmount() {\n    if (this.state.uploadTask !== null) {\n      this.state.uploadTask.cancel();\n      this.setState({ uploadTask: null });\n    }\n  }\n\n  openModal = () => this.setState({ modal: true });\n\n  closeModal = () => this.setState({ modal: false });\n\n  handleChange = event => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  handleKeyDown = event => {\n    if (event.ctrlKey && event.keyCode === 13) {\n      this.sendMessage();\n    }\n\n    const { message, typingRef, channel, user } = this.state;\n\n    if (message) {\n      typingRef\n        .child(channel.id)\n        .child(user.uid)\n        .set(user.displayName);\n    } else {\n      typingRef\n        .child(channel.id)\n        .child(user.uid)\n        .remove();\n    }\n  };\n\n  handleTogglePicker = () => {\n    this.setState({ emojiPicker: !this.state.emojiPicker });\n  };\n\n  handleAddEmoji = emoji => {\n    const oldMessage = this.state.message;\n    const newMessage = this.colonToUnicode(` ${oldMessage} ${emoji.colons} `);\n    this.setState({ message: newMessage, emojiPicker: false });\n    setTimeout(() => this.messageInputRef.focus(), 0);\n  };\n\n  colonToUnicode = message => {\n    return message.replace(/:[A-Za-z0-9_+-]+:/g, x => {\n      x = x.replace(/:/g, \"\");\n      let emoji = emojiIndex.emojis[x];\n      if (typeof emoji !== \"undefined\") {\n        let unicode = emoji.native;\n        if (typeof unicode !== \"undefined\") {\n          return unicode;\n        }\n      }\n      x = \":\" + x + \":\";\n      return x;\n    });\n  };\n\n  createMessage = (fileUrl = null) => {\n    const message = {\n      timestamp: firebase.database.ServerValue.TIMESTAMP,\n      id: this.state.user.uid,\n        name: this.state.user.displayName,\n        avatar: this.state.user.photoURL,\n        senderName: this.state.user.displayName\n    };\n    if (fileUrl !== null) {\n      message[\"image\"] = fileUrl;\n    } else {\n      message[\"message\"] = this.state.message;\n    }\n    return message;\n  };\n\n  sendMessage = () => {\n    const { getMessagesRef } = this.props;\n    const { message, channel, user, typingRef } = this.state;\n\n    if (message) {\n      this.setState({ loading: true });\n      getMessagesRef()\n        .child(user.uid)\n        .child(channel.id)\n        .push()\n        .set(this.createMessage())\n        .then(() => {\n          this.setState({ loading: false, message: \"\", errors: [] });\n          typingRef\n            .child(channel.id)\n            .child(user.uid)\n            .remove();\n        })\n        .catch(err => {\n          console.error(err);\n          this.setState({\n            loading: false,\n            errors: this.state.errors.concat(err)\n          });\n        });\n    } else {\n      this.setState({\n        errors: this.state.errors.concat({ message: \"Add a message\" })\n      });\n    }\n  };\n\n  getPath = () => {\n    if (this.props.isPrivateChannel) {\n      return `chat/private/${this.state.channel.id}`;\n    } else {\n      return \"chat/public\";\n    }\n  };\n\n  uploadFile = (file, metadata) => {\n    const pathToUpload = this.state.channel.id;\n    const ref = this.props.getMessagesRef();\n    const filePath = `${this.getPath()}/${uuidv4()}.jpg`;\n\n    this.setState(\n      {\n        uploadState: \"uploading\",\n        uploadTask: this.state.storageRef.child(filePath).put(file, metadata)\n      },\n      () => {\n        this.state.uploadTask.on(\n          \"state_changed\",\n          snap => {\n            const percentUploaded = Math.round(\n              (snap.bytesTransferred / snap.totalBytes) * 100\n            );\n            this.setState({ percentUploaded });\n          },\n          err => {\n            console.error(err);\n            this.setState({\n              errors: this.state.errors.concat(err),\n              uploadState: \"error\",\n              uploadTask: null\n            });\n          },\n          () => {\n            this.state.uploadTask.snapshot.ref\n              .getDownloadURL()\n              .then(downloadUrl => {\n                this.sendFileMessage(downloadUrl, ref, pathToUpload);\n              })\n              .catch(err => {\n                console.error(err);\n                this.setState({\n                  errors: this.state.errors.concat(err),\n                  uploadState: \"error\",\n                  uploadTask: null\n                });\n              });\n          }\n        );\n      }\n    );\n  };\n\n  sendFileMessage = (fileUrl, ref, pathToUpload) => {\n    ref\n      .child(pathToUpload)\n      .push()\n      .set(this.createMessage(fileUrl))\n      .then(() => {\n        this.setState({ uploadState: \"done\" });\n      })\n      .catch(err => {\n        console.error(err);\n        this.setState({\n          errors: this.state.errors.concat(err)\n        });\n      });\n  };\n\n  render() {\n    // prettier-ignore\n    const { errors, message, loading, modal, uploadState, percentUploaded, emojiPicker } = this.state;\n\n    return (\n      <Segment className=\"message__form\">\n        {emojiPicker && (\n          <Picker\n            set=\"apple\"\n            onSelect={this.handleAddEmoji}\n            className=\"emojipicker\"\n            title=\"Pick your emoji\"\n            emoji=\"point_up\"\n          />\n        )}\n        <Input\n          fluid\n          name=\"message\"\n          onChange={this.handleChange}\n          onKeyDown={this.handleKeyDown}\n          value={message}\n          ref={node => (this.messageInputRef = node)}\n          style={{ marginBottom: \"0.7em\" }}\n          label={\n            <Button\n              icon={emojiPicker ? \"close\" : \"add\"}\n              content={emojiPicker ? \"Close\" : null}\n              onClick={this.handleTogglePicker}\n            />\n          }\n          labelPosition=\"left\"\n          className={\n            errors.some(error => error.message.includes(\"message\"))\n              ? \"error\"\n              : \"\"\n          }\n          placeholder=\"Write your message\"\n        />\n        <Button.Group icon widths=\"2\">\n          <Button\n            onClick={this.sendMessage}\n            disabled={loading}\n            color=\"orange\"\n            content=\"Add Reply\"\n            labelPosition=\"left\"\n            icon=\"edit\"\n          />\n          {/* <Button\n            color=\"teal\"\n            disabled={uploadState === \"uploading\"}\n            onClick={this.openModal}\n            content=\"Upload Media\"\n            labelPosition=\"right\"\n            icon=\"cloud upload\"\n          /> */}\n        </Button.Group>\n        <FileModal\n          modal={modal}\n          closeModal={this.closeModal}\n          uploadFile={this.uploadFile}\n        />\n        <ProgressBar\n          uploadState={uploadState}\n          percentUploaded={percentUploaded}\n        />\n      </Segment>\n    );\n  }\n}\n\nexport default MessageForm;\n","import React from \"react\";\nimport moment from \"moment\";\nimport { Comment, Image } from \"semantic-ui-react\";\n\nconst isOwnMessage = (message, user) => {\n  return message.id === \"IVRobot\"\n  // return message.user.id === user.uid ? \"message__self\" : \"\";\n};\n\nconst isImage = message => {\n  return message.hasOwnProperty(\"image\") && !message.hasOwnProperty(\"content\");\n};\n\nconst timeFromNow = timestamp => moment(timestamp).fromNow();\n\nconst Message = ({ message, user }) => (\n  <Comment>\n    <Comment.Avatar src={\"http://gravatar.com/avatar/15ef5bd18c36ed4a2b8e582022117d97?d=identicon\"} />\n    <Comment.Content className={isOwnMessage(message, user)}>\n      <Comment.Author as=\"a\">{message.senderName}</Comment.Author>\n      <Comment.Metadata>{timeFromNow(message.timestamp)}</Comment.Metadata>\n      {isImage(message) ? (\n        <Image src={message.image} className=\"message__image\" />\n      ) : (\n        <Comment.Text>{message.message}</Comment.Text>\n      )}\n    </Comment.Content>\n  </Comment>\n);\n\nexport default Message;\n","import React from 'react';\n\nconst Typing = () => (\n  <div className=\"typing\">\n    <div className=\"typing__dot\"></div>\n    <div className=\"typing__dot\"></div>\n    <div className=\"typing__dot\"></div>\n  </div>\n)\n\nexport default Typing;","import React from \"react\";\n\nconst Skeleton = () => (\n  <div className=\"skeleton\">\n    <div className=\"skeleton__avatar\" />\n    <div className=\"skeleton__author\" />\n    <div className=\"skeleton__details\" />\n  </div>\n);\n\nexport default Skeleton;\n","import React from \"react\";\nimport { Segment, Comment } from \"semantic-ui-react\";\nimport { connect } from \"react-redux\";\nimport { setUserPosts } from \"../../actions\";\nimport firebase from \"../../firebase\";\n\nimport MessagesHeader from \"./MessagesHeader\";\nimport MessageForm from \"./MessageForm\";\nimport Message from \"./Message\";\nimport Typing from \"./Typing\";\nimport Skeleton from \"./Skeleton\";\n\nclass Messages extends React.Component {\n  state = {\n    privateChannel: this.props.isPrivateChannel,\n    privateMessagesRef: firebase.database().ref(\"privateMessages\"),\n    messagesRef: firebase.database().ref(\"messages\"),\n    messages: [],\n    messagesLoading: true,\n    channel: this.props.currentChannel,\n    isChannelStarred: false,\n    user: this.props.currentUser,\n    usersRef: firebase.database().ref(\"users\"),\n    numUniqueUsers: \"\",\n    searchTerm: \"\",\n    searchLoading: false,\n    searchResults: [],\n    typingRef: firebase.database().ref(\"typing\"),\n    typingUsers: [],\n    connectedRef: firebase.database().ref(\".info/connected\"),\n    listeners: []\n  };\n\n  componentDidMount() {\n    const { channel, user, listeners } = this.state;\n\n    if (channel && user) {\n      this.removeListeners(listeners);\n      this.addListeners(channel.id);\n      this.addUserStarsListener(channel.id, user.uid);\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeListeners(this.state.listeners);\n    this.state.connectedRef.off();\n  }\n\n  removeListeners = listeners => {\n    listeners.forEach(listener => {\n      listener.ref.child(listener.id).off(listener.event);\n    });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.messagesEnd) {\n      this.scrollToBottom();\n    }\n  }\n\n  addToListeners = (id, ref, event) => {\n    const index = this.state.listeners.findIndex(listener => {\n      return (\n        listener.id === id && listener.ref === ref && listener.event === event\n      );\n    });\n\n    if (index === -1) {\n      const newListener = { id, ref, event };\n      this.setState({ listeners: this.state.listeners.concat(newListener) });\n    }\n  };\n\n  scrollToBottom = () => {\n    this.messagesEnd.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  addListeners = channelId => {\n    this.addMessageListener(channelId);\n    this.addTypingListeners(channelId);\n  };\n\n  addTypingListeners = channelId => {\n    let typingUsers = [];\n    this.state.typingRef.child(channelId).on(\"child_added\", snap => {\n      if (snap.key !== this.state.user.uid) {\n        typingUsers = typingUsers.concat({\n          id: snap.key,\n          name: snap.val()\n        });\n        this.setState({ typingUsers });\n      }\n    });\n    this.addToListeners(channelId, this.state.typingRef, \"child_added\");\n\n    this.state.typingRef.child(channelId).on(\"child_removed\", snap => {\n      const index = typingUsers.findIndex(user => user.id === snap.key);\n      if (index !== -1) {\n        typingUsers = typingUsers.filter(user => user.id !== snap.key);\n        this.setState({ typingUsers });\n      }\n    });\n    this.addToListeners(channelId, this.state.typingRef, \"child_removed\");\n\n    this.state.connectedRef.on(\"value\", snap => {\n      if (snap.val() === true) {\n        this.state.typingRef\n          .child(channelId)\n          .child(this.state.user.uid)\n          .onDisconnect()\n          .remove(err => {\n            if (err !== null) {\n              console.error(err);\n            }\n          });\n      }\n    });\n  };\n\n  addMessageListener = channelId => {\n    let loadedMessages = [];\n    const ref = this.getMessagesRef();\n\n    firebase.database().ref(`messages/${this.state.user.uid}/${channelId}`).on(\"child_added\", snap => {\n      loadedMessages.push(snap.val());\n      this.setState({\n        messages: loadedMessages,\n        messagesLoading: false\n      });\n      this.countUniqueUsers(loadedMessages);\n      this.countUserPosts(loadedMessages);\n    });\n    this.addToListeners(channelId, ref, \"child_added\");\n  };\n\n  addUserStarsListener = (channelId, userId) => {\n    this.state.usersRef\n      .child(userId)\n      .child(\"starred\")\n      .once(\"value\")\n      .then(data => {\n        if (data.val() !== null) {\n          const channelIds = Object.keys(data.val());\n          const prevStarred = channelIds.includes(channelId);\n          this.setState({ isChannelStarred: prevStarred });\n        }\n      });\n  };\n\n  getMessagesRef = () => {\n    const { messagesRef, privateMessagesRef, privateChannel } = this.state;\n    return privateChannel ? privateMessagesRef : messagesRef;\n  };\n\n  handleStar = () => {\n    this.setState(\n      prevState => ({\n        isChannelStarred: !prevState.isChannelStarred\n      }),\n      () => this.starChannel()\n    );\n  };\n\n  starChannel = () => {\n    if (this.state.isChannelStarred) {\n      this.state.usersRef.child(`${this.state.user.uid}/starred`).update({\n        [this.state.channel.id]: {\n          name: this.state.channel.name,\n          details: this.state.channel.details,\n          createdBy: {\n            name: this.state.channel.createdBy.name,\n            avatar: this.state.channel.createdBy.avatar\n          }\n        }\n      });\n    } else {\n      this.state.usersRef\n        .child(`${this.state.user.uid}/starred`)\n        .child(this.state.channel.id)\n        .remove(err => {\n          if (err !== null) {\n            console.error(err);\n          }\n        });\n    }\n  };\n\n  handleSearchChange = event => {\n    this.setState(\n      {\n        searchTerm: event.target.value,\n        searchLoading: true\n      },\n      () => this.handleSearchMessages()\n    );\n  };\n\n  handleSearchMessages = () => {\n    const channelMessages = [...this.state.messages];\n    const regex = new RegExp(this.state.searchTerm, \"gi\");\n    const searchResults = channelMessages.reduce((acc, message) => {\n      if (\n        (message.message && message.message.match(regex)) ||\n        message.senderName.match(regex)\n      ) {\n        acc.push(message);\n      }\n      return acc;\n    }, []);\n    this.setState({ searchResults });\n    setTimeout(() => this.setState({ searchLoading: false }), 1000);\n  };\n\n  countUniqueUsers = messages => {\n    const uniqueUsers = messages.reduce((acc, message) => {\n      if (!acc.includes(message.senderName)) {\n        acc.push(message.senderName);\n      }\n      return acc;\n    }, []);\n    const plural = uniqueUsers.length > 1 || uniqueUsers.length === 0;\n    const numUniqueUsers = `${uniqueUsers.length} user${plural ? \"s\" : \"\"}`;\n    this.setState({ numUniqueUsers });\n  };\n\n  countUserPosts = messages => {\n    let userPosts = messages.reduce((acc, message) => {\n      if (message.senderName in acc) {\n        acc[message.senderName].count += 1;\n      } else {\n        acc[message.senderName] = {\n          avatar: message.avatar,\n          count: 1\n        };\n      }\n      return acc;\n    }, {});\n    this.props.setUserPosts(userPosts);\n  };\n\n  displayMessages = messages =>\n    messages.length > 0 &&\n    messages.map(message => (\n      <Message\n        key={message.timestamp}\n        message={message}\n        user={this.state.user}\n      />\n    ));\n\n  displayChannelName = channel => {\n    return channel\n      ? `${this.state.privateChannel ? \"Customer Name: \" : \"Customer Name: \"}${channel.name}`\n      : \"\";\n  };\n\n  displayTypingUsers = users =>\n    users.length > 0 &&\n    users.map(user => (\n      <div\n        style={{ display: \"flex\", alignItems: \"center\", marginBottom: \"0.2em\" }}\n        key={user.id}\n      >\n        <span className=\"user__typing\">{user.name} is typing</span> <Typing />\n      </div>\n    ));\n\n  displayMessageSkeleton = loading =>\n    loading ? (\n      <React.Fragment>\n        {[...Array(10)].map((_, i) => (\n          <Skeleton key={i} />\n        ))}\n      </React.Fragment>\n    ) : null;\n\n  render() {\n    // prettier-ignore\n    const { messagesRef, messages, channel, user, numUniqueUsers, searchTerm, searchResults, searchLoading, privateChannel, isChannelStarred, typingUsers, messagesLoading } = this.state;\n\n    return (\n      <React.Fragment>\n        <MessagesHeader\n          channelName={this.displayChannelName(channel)}\n          numUniqueUsers={numUniqueUsers}\n          handleSearchChange={this.handleSearchChange}\n          searchLoading={searchLoading}\n          isPrivateChannel={privateChannel}\n          handleStar={this.handleStar}\n          isChannelStarred={isChannelStarred}\n        />\n\n        <Segment>\n          <Comment.Group className=\"messages\">\n            {this.displayMessageSkeleton(messagesLoading)}\n            {searchTerm\n              ? this.displayMessages(searchResults)\n              : this.displayMessages(messages)}\n            {this.displayTypingUsers(typingUsers)}\n            <div ref={node => (this.messagesEnd = node)} />\n          </Comment.Group>\n        </Segment>\n\n        <MessageForm\n          messagesRef={messagesRef}\n          currentChannel={channel}\n          currentUser={user}\n          isPrivateChannel={privateChannel}\n          getMessagesRef={this.getMessagesRef}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default connect(\n  null,\n  { setUserPosts }\n)(Messages);\n","import React from \"react\";\nimport {\n  Segment,\n  Accordion,\n  Header,\n  Icon,\n  Image,\n  List\n} from \"semantic-ui-react\";\n\nclass MetaPanel extends React.Component {\n  state = {\n    channel: this.props.currentChannel,\n    privateChannel: this.props.isPrivateChannel,\n    activeIndex: 0\n  };\n\n  setActiveIndex = (event, titleProps) => {\n    const { index } = titleProps;\n    const { activeIndex } = this.state;\n    const newIndex = activeIndex === index ? -1 : index;\n    this.setState({ activeIndex: newIndex });\n  };\n\n  formatCount = num => (num > 1 || num === 0 ? `${num} posts` : `${num} post`);\n\n  displayTopPosters = posts =>\n    Object.entries(posts)\n      .sort((a, b) => b[1] - a[1])\n      .map(([key, val], i) => (\n        <List.Item key={i}>\n          <Image avatar src={val.avatar} />\n          <List.Content>\n            <List.Header as=\"a\">{key}</List.Header>\n            <List.Description>{this.formatCount(val.count)}</List.Description>\n          </List.Content>\n        </List.Item>\n      ))\n      .slice(0, 2);\n\n  render() {\n    const { activeIndex, privateChannel, channel } = this.state;\n    const { userPosts } = this.props;\n\n    if (privateChannel) return null;\n\n    return (\n      // <Segment loading={!channel}>\n      //   <Header as=\"h3\" attached=\"top\">\n      //     About {channel && channel.name}\n      //   </Header>\n      //   <Accordion styled attached=\"true\">\n      //     <Accordion.Title\n      //       active={activeIndex === 0}\n      //       index={0}\n      //       onClick={this.setActiveIndex}\n      //     >\n      //       <Icon name=\"dropdown\" />\n      //       <Icon name=\"info\" />\n      //       Channel Details\n      //     </Accordion.Title>\n      //     <Accordion.Content active={activeIndex === 0}>\n      //       {channel && channel.details}\n      //     </Accordion.Content>\n\n      //     <Accordion.Title\n      //       active={activeIndex === 1}\n      //       index={1}\n      //       onClick={this.setActiveIndex}\n      //     >\n      //       <Icon name=\"dropdown\" />\n      //       <Icon name=\"user circle\" />\n      //       Top Posters\n      //     </Accordion.Title>\n      //     <Accordion.Content active={activeIndex === 1}>\n      //       <List>{userPosts && this.displayTopPosters(userPosts)}</List>\n      //     </Accordion.Content>\n\n      //     <Accordion.Title\n      //       active={activeIndex === 2}\n      //       index={2}\n      //       onClick={this.setActiveIndex}\n      //     >\n      //       <Icon name=\"dropdown\" />\n      //       <Icon name=\"pencil alternate\" />\n      //       Created By\n      //     </Accordion.Title>\n      //     <Accordion.Content active={activeIndex === 2}>\n      //       <Header as=\"h3\">\n      //         <Image circular src={channel && channel.avatar} />\n      //         {channel && channel.name}\n      //       </Header>\n      //     </Accordion.Content>\n      //   </Accordion>\n      // </Segment>\n      <div></div>\n    );\n  }\n}\n\nexport default MetaPanel;\n","import React from \"react\";\nimport { Grid, Segment, Divider, Header, Icon } from \"semantic-ui-react\";\nimport \"./App.css\";\nimport { connect } from \"react-redux\";\n\nimport ColorPanel from \"./ColorPanel/ColorPanel\";\nimport SidePanel from \"./SidePanel/SidePanel\";\nimport Messages from \"./Messages/Messages\";\nimport MetaPanel from \"./MetaPanel/MetaPanel\";\n\n// prettier-ignore\nconst App = ({ currentUser, currentChannel, isPrivateChannel, userPosts, primaryColor, secondaryColor }) => (\n  <Grid columns=\"equal\" className=\"app\" style={{ background: secondaryColor }}>\n    {/* <ColorPanel\n      key={currentUser && currentUser.name}\n      currentUser={currentUser}\n    /> */}\n    <SidePanel\n      key={currentUser && currentUser.uid}\n      currentUser={currentUser}\n      primaryColor={primaryColor}\n    />\n\n    {currentChannel !== null ? <div><Grid.Column style={{ marginLeft: 320 }}>\n      <Messages\n        key={currentChannel && currentChannel.id}\n        currentChannel={currentChannel}\n        currentUser={currentUser}\n        isPrivateChannel={isPrivateChannel}\n      />\n    </Grid.Column>\n\n    <Grid.Column width={4}>\n      <MetaPanel\n        key={currentChannel && currentChannel.name}\n        userPosts={userPosts}\n        currentChannel={currentChannel}\n        isPrivateChannel={isPrivateChannel}\n      />\n    </Grid.Column></div> : <Grid verticalAlign=\"middle\" className=\"app\"  style={{ marginLeft: 320 }}>\n        <Grid.Column style={{ maxWidth: 500 }}>\n        <Header icon as=\"h2\">\n            <Icon name='headphone' />\n            IVRobot Store Owner's Console. \n          </Header>\n          <p>Welcome to IVRobot store owner's console! Please select customer to start chat.</p>\n          </Grid.Column></Grid>}\n  </Grid>\n);\n\nconst mapStateToProps = state => ({\n  currentUser: state.user.currentUser,\n  currentChannel: state.channel.currentChannel,\n  isPrivateChannel: state.channel.isPrivateChannel,\n  userPosts: state.channel.userPosts,\n  primaryColor: state.colors.primaryColor,\n  secondaryColor: state.colors.secondaryColor\n});\n\nexport default connect(mapStateToProps)(App);\n","import React from \"react\";\nimport firebase from \"../../firebase\";\nimport {\n  Grid,\n  Form,\n  Segment,\n  Button,\n  Header,\n  Message,\n  Icon\n} from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\n\nclass Login extends React.Component {\n  state = {\n    email: \"\",\n    password: \"\",\n    errors: [],\n    loading: false\n  };\n\n  displayErrors = errors =>\n    errors.map((error, i) => <p key={i}>{error.message}</p>);\n\n  handleChange = event => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    if (this.isFormValid(this.state)) {\n      this.setState({ errors: [], loading: true });\n      firebase\n        .auth()\n        .signInWithEmailAndPassword(this.state.email, this.state.password)\n        .then(signedInUser => {\n          console.log(signedInUser);\n        })\n        .catch(err => {\n          console.error(err);\n          this.setState({\n            errors: this.state.errors.concat(err),\n            loading: false\n          });\n        });\n    }\n  };\n\n  isFormValid = ({ email, password }) => email && password;\n\n  handleInputError = (errors, inputName) => {\n    return errors.some(error => error.message.toLowerCase().includes(inputName))\n      ? \"error\"\n      : \"\";\n  };\n\n  render() {\n    const { email, password, errors, loading } = this.state;\n\n    return (\n      <Grid textAlign=\"center\" verticalAlign=\"middle\" className=\"app\">\n        <Grid.Column style={{ maxWidth: 450 }}>\n          <Header as=\"h1\" icon color=\"violet\" textAlign=\"center\">\n            <Icon name=\"headphones\" color=\"violet\" />\n            Login to IVRobot\n          </Header>\n          <Form onSubmit={this.handleSubmit} size=\"large\">\n            <Segment stacked>\n              <Form.Input\n                fluid\n                name=\"email\"\n                icon=\"mail\"\n                iconPosition=\"left\"\n                placeholder=\"Email Address\"\n                onChange={this.handleChange}\n                value={email}\n                className={this.handleInputError(errors, \"email\")}\n                type=\"email\"\n              />\n\n              <Form.Input\n                fluid\n                name=\"password\"\n                icon=\"lock\"\n                iconPosition=\"left\"\n                placeholder=\"Password\"\n                onChange={this.handleChange}\n                value={password}\n                className={this.handleInputError(errors, \"password\")}\n                type=\"password\"\n              />\n\n              <Button\n                disabled={loading}\n                className={loading ? \"loading\" : \"\"}\n                color=\"violet\"\n                fluid\n                size=\"large\"\n              >\n                Submit\n              </Button>\n            </Segment>\n          </Form>\n          {errors.length > 0 && (\n            <Message error>\n              <h3>Error</h3>\n              {this.displayErrors(errors)}\n            </Message>\n          )}\n          <Message>\n            Don't have an account? <Link to=\"/register\">Register</Link>\n          </Message>\n        </Grid.Column>\n      </Grid>\n    );\n  }\n}\n\nexport default Login;\n","import React from \"react\";\nimport firebase from \"../../firebase\";\nimport md5 from \"md5\";\nimport {\n  Grid,\n  Form,\n  Segment,\n  Button,\n  Header,\n  Message,\n  Icon\n} from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\n\nclass Register extends React.Component {\n  state = {\n    username: \"\",\n    storeName: \"\",\n    openHour: \"\",\n    closeHour: \"\",\n    address1: \"\",\n    address2: \"\",\n    zipcode: \"\",\n    city: \"\",\n    state: \"\",\n    email: \"\",\n    password: \"\",\n    passwordConfirmation: \"\",\n    errors: [],\n    loading: false,\n    usersRef: firebase.database().ref(\"users\")\n  };\n\n  isFormValid = () => {\n    let errors = [];\n    let error;\n\n    if (this.isFormEmpty(this.state)) {\n      error = { message: \"Fill in all fields\" };\n      this.setState({ errors: errors.concat(error) });\n      return false;\n    } else if (!this.isPasswordValid(this.state)) {\n      error = { message: \"Password is invalid\" };\n      this.setState({ errors: errors.concat(error) });\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  isFormEmpty = ({ username, storeName, email, password, passwordConfirmation }) => {\n    return (\n      !username.length ||\n      !storeName.length ||\n      !email.length ||\n      !password.length ||\n      !passwordConfirmation.length\n    );\n  };\n\n  isPasswordValid = ({ password, passwordConfirmation }) => {\n    if (password.length < 6 || passwordConfirmation.length < 6) {\n      return false;\n    } else if (password !== passwordConfirmation) {\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  displayErrors = errors =>\n    errors.map((error, i) => <p key={i}>{error.message}</p>);\n\n  handleChange = event => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    if (this.isFormValid()) {\n      this.setState({ errors: [], loading: true });\n\n      const {\n        storeName,\n        openHour,\n        closeHour,\n        address1,\n        address2,\n        zipcode,\n        city,\n        state,\n      } = this.state;\n\n      firebase\n        .auth()\n        .createUserWithEmailAndPassword(this.state.email, this.state.password)\n        .then(createdUser => {\n          console.log(createdUser);\n          createdUser.user\n            .updateProfile({\n              displayName: this.state.username,\n              photoURL: `http://gravatar.com/avatar/${md5(\n                createdUser.user.email\n              )}?d=identicon`\n            })\n            .then(() => {\n              this.saveUser({\n                createdUser, \n                storeName,\n                openHour,\n                closeHour,\n                address1,\n                address2,\n                zipcode,\n                city,\n                state,\n              }).then(() => {\n                console.log(\"user saved\");\n              });\n            })\n            .catch(err => {\n              console.error(err);\n              this.setState({\n                errors: this.state.errors.concat(err),\n                loading: false\n              });\n            });\n        })\n        .catch(err => {\n          console.error(err);\n          this.setState({\n            errors: this.state.errors.concat(err),\n            loading: false\n          });\n        });\n    }\n  };\n\n  saveUser = ({createdUser, \n    storeName,\n    openHour,\n    closeHour,\n    address1,\n    address2,\n    zipcode,\n    city,\n    state,\n  }) => {\n    return this.state.usersRef.child(createdUser.user.uid).set({\n      name: createdUser.user.displayName,\n      avatar: createdUser.user.photoURL,\n      storeName,\n      openHour,\n      closeHour,\n      address1,\n      address2,\n      zipcode,\n      city,\n      state,\n\n    });\n  };\n\n  handleInputError = (errors, inputName) => {\n    return errors.some(error => error.message.toLowerCase().includes(inputName))\n      ? \"error\"\n      : \"\";\n  };\n\n  render() {\n    const {\n      username,\n      storeName,\n      openHour,\n      closeHour,\n      address1,\n      address2,\n      zipcode,\n      city,\n      state,\n      email,\n      password,\n      passwordConfirmation,\n      errors,\n      loading\n    } = this.state;\n\n    return (\n      <Grid textAlign=\"center\" verticalAlign=\"middle\" className=\"app\">\n        <Grid.Column style={{ maxWidth: 450 }}>\n          <Header as=\"h1\" icon color=\"orange\" textAlign=\"center\">\n            <Icon name=\"add user\" color=\"orange\" />\n            Register for IVRobot\n          </Header>\n          <Form onSubmit={this.handleSubmit} size=\"large\">\n            <Segment stacked>\n              <Form.Input\n                fluid\n                name=\"username\"\n                icon=\"user\"\n                iconPosition=\"left\"\n                placeholder=\"Username\"\n                onChange={this.handleChange}\n                value={username}\n                type=\"text\"\n              />\n\n<Form.Input\n                fluid\n                name=\"storeName\"\n                icon=\"warehouse\"\n                iconPosition=\"left\"\n                placeholder=\"Store Name\"\n                onChange={this.handleChange}\n                value={storeName}\n                type=\"text\"\n              />\n\n              <Form.Input\n                fluid\n                name=\"email\"\n                icon=\"mail\"\n                iconPosition=\"left\"\n                placeholder=\"Email Address\"\n                onChange={this.handleChange}\n                value={email}\n                className={this.handleInputError(errors, \"email\")}\n                type=\"email\"\n              />\n\n              <Form.Input\n                fluid\n                name=\"password\"\n                icon=\"lock\"\n                iconPosition=\"left\"\n                placeholder=\"Password\"\n                onChange={this.handleChange}\n                value={password}\n                className={this.handleInputError(errors, \"password\")}\n                type=\"password\"\n              />\n\n              <Form.Input\n                fluid\n                name=\"passwordConfirmation\"\n                icon=\"repeat\"\n                iconPosition=\"left\"\n                placeholder=\"Password Confirmation\"\n                onChange={this.handleChange}\n                value={passwordConfirmation}\n                className={this.handleInputError(errors, \"password\")}\n                type=\"password\"\n              />\n\n\n<Form.Input\n                fluid\n                name=\"openHour\"\n                icon=\"clock outline\"\n                iconPosition=\"left\"\n                placeholder=\"Open Hour\"\n                onChange={this.handleChange}\n                value={openHour}\n                type=\"text\"\n              />\n\n<Form.Input\n                fluid\n                name=\"closeHour\"\n                icon=\"clock outline\"\n                iconPosition=\"left\"\n                placeholder=\"Close Hour\"\n                onChange={this.handleChange}\n                value={closeHour}\n                type=\"text\"\n              />\n\n<Form.Input\n                fluid\n                name=\"address1\"\n                icon=\"address book outline\"\n                iconPosition=\"left\"\n                placeholder=\"Address1\"\n                onChange={this.handleChange}\n                value={address1}\n                type=\"text\"\n              />\n\n<Form.Input\n                fluid\n                name=\"address2\"\n                icon=\"address book outline\"\n                iconPosition=\"left\"\n                placeholder=\"Address2\"\n                onChange={this.handleChange}\n                value={address2}\n                type=\"text\"\n              />\n\n<Form.Input\n                fluid\n                name=\"city\"\n\n                placeholder=\"City\"\n                onChange={this.handleChange}\n                value={city}\n                type=\"text\"\n              />\n\n<Form.Input\n                fluid\n                name=\"state\"\n                placeholder=\"State\"\n                onChange={this.handleChange}\n                value={state}\n                type=\"text\"\n              />\n\n<Form.Input\n                fluid\n                name=\"zipcode\"\n                placeholder=\"Zip Code\"\n                onChange={this.handleChange}\n                value={zipcode}\n                type=\"text\"\n              />\n\n              <Button\n                disabled={loading}\n                className={loading ? \"loading\" : \"\"}\n                color=\"orange\"\n                fluid\n                size=\"large\"\n              >\n                Submit\n              </Button>\n            </Segment>\n          </Form>\n          {errors.length > 0 && (\n            <Message error>\n              <h3>Error</h3>\n              {this.displayErrors(errors)}\n            </Message>\n          )}\n          <Message>\n            Already a user? <Link to=\"/login\">Login</Link>\n          </Message>\n        </Grid.Column>\n      </Grid>\n    );\n  }\n}\n\nexport default Register;\n","import React from \"react\";\nimport { Loader, Dimmer } from \"semantic-ui-react\";\n\nconst Spinner = () => (\n  <Dimmer active>\n    <Loader size=\"huge\" content={\"Preparing Chat...\"} />\n  </Dimmer>\n);\n\nexport default Spinner;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { combineReducers } from \"redux\";\nimport * as actionTypes from \"../actions/types\";\n\nconst initialUserState = {\n  currentUser: null,\n  isLoading: true\n};\n\nconst user_reducer = (state = initialUserState, action) => {\n  switch (action.type) {\n    case actionTypes.SET_USER:\n      return {\n        currentUser: action.payload.currentUser,\n        isLoading: false\n      };\n    case actionTypes.CLEAR_USER:\n      return {\n        ...state,\n        isLoading: false\n      };\n    default:\n      return state;\n  }\n};\n\nconst initialChannelState = {\n  currentChannel: null,\n  isPrivateChannel: false,\n  userPosts: null\n};\n\nconst channel_reducer = (state = initialChannelState, action) => {\n  switch (action.type) {\n    case actionTypes.SET_CURRENT_CHANNEL:\n      return {\n        ...state,\n        currentChannel: action.payload.currentChannel\n      };\n    case actionTypes.SET_PRIVATE_CHANNEL:\n      return {\n        ...state,\n        isPrivateChannel: action.payload.isPrivateChannel\n      };\n    case actionTypes.SET_USER_POSTS:\n      return {\n        ...state,\n        userPosts: action.payload.userPosts\n      };\n    default:\n      return state;\n  }\n};\n\nconst initialColorsState = {\n  primaryColor: \"#173F5F\",\n  secondaryColor: \"#eee\"\n};\n\nconst colors_reducer = (state = initialColorsState, action) => {\n  switch (action.type) {\n    case actionTypes.SET_COLORS:\n      return {\n        primaryColor: action.payload.primaryColor,\n        secondaryColor: action.payload.secondaryColor\n      };\n    default:\n      return state;\n  }\n};\n\nconst rootReducer = combineReducers({\n  user: user_reducer,\n  channel: channel_reducer,\n  colors: colors_reducer\n});\n\nexport default rootReducer;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport Login from \"./components/Auth/Login\";\nimport Register from \"./components/Auth/Register\";\nimport Spinner from \"./Spinner\";\nimport registerServiceWorker from \"./registerServiceWorker\";\nimport firebase from \"./firebase\";\n\nimport \"semantic-ui-css/semantic.min.css\";\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  withRouter\n} from \"react-router-dom\";\n\nimport { createStore } from \"redux\";\nimport { Provider, connect } from \"react-redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport rootReducer from \"./reducers\";\nimport { setUser, clearUser } from \"./actions\";\n\nconst store = createStore(rootReducer, composeWithDevTools());\n\nclass Root extends React.Component {\n  componentDidMount() {\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        // console.log(user);\n        this.props.setUser(user);\n        this.props.history.push(\"/\");\n      } else {\n        this.props.history.push(\"/login\");\n        this.props.clearUser();\n      }\n    });\n  }\n\n  render() {\n    return this.props.isLoading ? (\n      <Spinner />\n    ) : (\n      <Switch>\n        <Route exact path=\"/\" component={App} />\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/register\" component={Register} />\n      </Switch>\n    );\n  }\n}\n\nconst mapStateFromProps = state => ({\n  isLoading: state.user.isLoading\n});\n\nconst RootWithAuth = withRouter(\n  connect(\n    mapStateFromProps,\n    { setUser, clearUser }\n  )(Root)\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router>\n      <RootWithAuth />\n    </Router>\n  </Provider>,\n  document.getElementById(\"root\")\n);\nregisterServiceWorker();\n"],"sourceRoot":""}